import{M as V,T as N,_ as x,S as E,a as y,b as T,c as F,d as U,e as H,f as v,V as X}from"./button.3ce30493.js";import{R as k,V as j,P as G,m as Y,_ as C,a as O,b as A,c as q,d as g}from"./submit-footer.4e25f04d.js";import{m as d,c as J,T as p,S as K,a as l,k as Q,n as c,b as Z,u as tt,d as B,e as f,f as R,g as et,_ as st}from"./main.bc7f684f.js";import{_,C as D}from"./index.e954868e.js";import{B as u}from"./VItemGroup.103183dd.js";import{_ as b,a as w}from"./VWindowItem.f2dc70c9.js";import{R as I,f as it}from"./confirm-footer.fd7b667d.js";import"./VInput.56b67ace.js";import"./change-password-dialog.fea5d640.js";import"./index.5b23bdea.js";function $(t){const s=Math.abs(t);return Math.sign(t)*(s/((1/.501-2)*(1-s)+1))}function S(t,e,s,i){const n=t.clientWidth,r=s?e.content-t.offsetLeft-n:t.offsetLeft;s&&(i=-i);const a=e.wrapper+i,o=n+r,m=n*.4;return r<=i?i=Math.max(r-m,0):a<=o&&(i=Math.min(i-(a-o-m),e.content-e.wrapper)),s?-i:i}function nt(t,e,s){const{offsetLeft:i,clientWidth:n}=t;if(s){const r=e.content-i-n/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,r))}else{const r=i+n/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,r))}}const h=d(u,V).extend({name:"base-slide-group",directives:{Resize:k,Touch:N},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)}},data:()=>({isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return typeof window<"u"},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...u.options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&this.scrollOffset!==0}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$vuetify.rtl&&(t=-t);let e=t<=0?$(-t):t>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+$(this.widths.content-this.widths.wrapper-t):-t;this.$vuetify.rtl&&(e=-e),this.$refs.content.style.transform=`translateX(${e}px)`}},mounted(){if(typeof ResizeObserver<"u"){const t=new ResizeObserver(()=>{this.onResize()});t.observe(this.$el),t.observe(this.$refs.content),this.$on("hook:destroyed",()=>{t.disconnect()})}else{let t=0;this.$on("hook:beforeUpdate",()=>{var e;t=(((e=this.$refs.content)===null||e===void 0?void 0:e.children)||[]).length}),this.$on("hook:updated",()=>{var e;t!==(((e=this.$refs.content)===null||e===void 0?void 0:e.children)||[]).length&&this.setWidths()})}},methods:{onScroll(){this.$refs.wrapper.scrollLeft=0},onFocusin(t){if(!!this.isOverflowing){for(const e of J(t))for(const s of this.items)if(s.$el===e){this.scrollOffset=S(s.$el,this.widths,this.$vuetify.rtl,this.scrollOffset);return}}},genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&t==="prev"?e="next":this.$vuetify.rtl&&t==="next"&&(e="prev");const s=`${t[0].toUpperCase()}${t.slice(1)}`,i=this[`has${s}`];return!this.showArrows&&!i?null:this.$createElement(_,{props:{disabled:!i}},this[`${e}Icon`])},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(j,[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset(t,e,s,i){const n=s?-1:1,r=n*i+(t==="prev"?-1:1)*e.wrapper;return n*Math.max(Math.min(r,e.content-e.wrapper),0)},onAffixClick(t){this.$emit(`click:${t}`),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){if(!!this.canTouch){if(!this.isSwiping){const e=t.touchmoveX-t.touchstartX,s=t.touchmoveY-t.touchstartY;this.isSwipingHorizontal=Math.abs(e)>Math.abs(s),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-t.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:t,wrapper:e}=this.$refs,s=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-s&&(this.scrollOffset=-s):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=s&&(this.scrollOffset=s),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}!this.selectedItem||(this.selectedIndex===0||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=nt(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=S(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame(()=>{if(this._isDestroyed)return;const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()})}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});h.extend({name:"v-slide-group",provide(){return{slideGroup:this}}});const rt=d(h,K,p).extend({name:"v-tabs-bar",provide(){return{tabsBar:this}},computed:{classes(){return{...h.options.computed.classes.call(this),"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows,...this.themeClasses}}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider(){!this.isBooted||this.$emit("call:slider")},genContent(){const t=h.options.methods.genContent.call(this);return t.data=t.data||{},t.data.staticClass+=" v-tabs-bar__content",t},onRouteChange(t,e){if(this.mandatory)return;const s=this.items,i=t.path,n=e.path;let r=!1,a=!1;for(const o of s)if(o.to===n?a=!0:o.to===i&&(r=!0),r&&a)break;!r&&a&&(this.internalValue=void 0)}},render(t){const e=h.options.render.call(this,t);return e.data.attrs={role:"tablist"},e}}),z=b.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes(){return{...b.options.computed.classes.call(this),"v-tabs-items":!0}},isDark(){return this.rootIsDark}},methods:{getValue(t,e){return t.id||u.options.methods.getValue.call(this,t,e)}}}),ot=d(D).extend({name:"v-tabs-slider",render(t){return t("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),at=d(D,G,p),lt=at.extend().extend({name:"v-tabs",directives:{Resize:k},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakpoint:[String,Number],nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:[Boolean,String],sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes(){return{"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical,...this.themeClasses}},isReversed(){return this.$vuetify.rtl&&this.vertical},sliderStyles(){return{height:l(this.slider.height),left:this.isReversed?void 0:l(this.slider.left),right:this.isReversed?l(this.slider.right):void 0,top:this.vertical?l(this.slider.top):void 0,transition:this.slider.left!=null?null:"none",width:l(this.slider.width)}},computedColor(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",iconsAndText:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted(){if(typeof ResizeObserver<"u"){const t=new ResizeObserver(()=>{this.onResize()});t.observe(this.$el),this.$on("hook:destroyed",()=>{t.disconnect()})}this.$nextTick(()=>{window.setTimeout(this.callSlider,30)})},methods:{callSlider(){return this.hideSlider||!this.$refs.items||!this.$refs.items.selectedItems.length?(this.slider.width=0,!1):(this.$nextTick(()=>{const t=this.$refs.items.selectedItems[0];if(!t||!t.$el){this.slider.width=0,this.slider.left=0;return}const e=t.$el;this.slider={height:this.vertical?e.scrollHeight:Number(this.sliderSize),left:this.vertical?0:e.offsetLeft,right:this.vertical?0:e.offsetLeft+e.offsetWidth,top:e.offsetTop,width:this.vertical?Number(this.sliderSize):e.scrollWidth}}),!0)},genBar(t,e){const s={style:{height:l(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakpoint:this.mobileBreakpoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:i=>{this.internalValue=i}},ref:"items"};return this.setTextColor(this.computedColor,s),this.setBackgroundColor(this.backgroundColor,s),this.$createElement(rt,s,[this.genSlider(e),t])},genItems(t,e){return t||(e.length?this.$createElement(z,{props:{value:this.internalValue},on:{change:s=>{this.internalValue=s}}},e):null)},genSlider(t){return this.hideSlider?null:(t||(t=this.$createElement(ot,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[t]))},onResize(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes(){let t=null,e=null;const s=[],i=[],n=this.$slots.default||[],r=n.length;for(let a=0;a<r;a++){const o=n[a];if(o.componentOptions)switch(o.componentOptions.Ctor.options.name){case"v-tabs-slider":e=o;break;case"v-tabs-items":t=o;break;case"v-tab-item":s.push(o);break;default:i.push(o)}else i.push(o)}return{tab:i,slider:e,items:t,item:s}}},render(t){const{tab:e,slider:s,items:i,item:n}=this.parseNodes();return t("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(e,s),this.genItems(i,n)])}}),ct=d(I,it("tabsBar"),p),ht=ct.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...I.options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){let t=this.to||this.href;return t==null?t:(this.$router&&this.to===Object(this.to)&&(t=this.$router.resolve(this.to,this.$route,this.append).href),t.replace("#",""))}},methods:{click(t){if(this.disabled){t.preventDefault();return}this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle()},toggle(){(!this.isActive||!this.tabsBar.mandatory&&!this.to)&&this.$emit("change")}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.attrs={...s.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:this.disabled?-1:0},s.on={...s.on,keydown:i=>{i.keyCode===Q.enter&&this.click(i),this.$emit("keydown",i)}},t(e,s,this.$slots.default)}}),dt=w.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=w.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}});const ut={name:"DjangoAdminLink",data(){return{djangoAdminURL:window.CODEX.DJANGO_ADMIN_PATH,mdiOpenInNew:Y}}};var pt=function(){var e=this,s=e._self._c;return s(x,[s(C,{attrs:{id:"oldDjangoAdmin",href:e.djangoAdminURL,target:"_blank",ripple:""}},[s(O,[s(A,[e._v(" Old Admin Panel "),s(_,{attrs:{small:""}},[e._v(" "+e._s(e.mdiOpenInNew)+" ")])],1)],1)],1)],1)},ft=[],_t=c(ut,pt,ft,!1,null,"82c19c35",null,null);const P=_t.exports;const mt={name:"AdminSettingsPanel",data(){return{mdiBookshelf:q}},computed:{...Z(tt,{browserRoute:t=>t.page.routes.last?{name:"browser",params:t.page.routes.last}:{name:"home"}})}};var vt=function(){var e=this,s=e._self._c;return s("div",[e._m(0),s(x,[s(C,{ref:"browserLink",attrs:{ripple:"",to:e.browserRoute}},[s(O,[s(A,[s(_,[e._v(e._s(e.mdiBookshelf))]),e._v("Browser ")],1)],1)],1)],1)],1)},gt=[function(){var t=this,e=t._self._c;return e("header",{attrs:{id:"adminMenuHeader"}},[e("h3",[t._v("Admin Status")])])}],bt=c(mt,vt,gt,!1,null,"1127dc99",null,null);const M=bt.exports;const wt={name:"AdminSettingsDrawer",components:{AdminSettingsPanel:M,DjangoAdminLink:P,SettingsCommonPanel:E,SettingsFooter:y,VersionFooter:T},computed:{...B(f,["isSettingsDrawerOpen"])}};var $t=function(){var e=this,s=e._self._c;return s(F,{staticClass:"settingsDrawer",attrs:{id:"adminSetingsDrawer",app:"",right:"",touchless:"","mobile-breakpoint":960},scopedSlots:e._u([{key:"append",fn:function(){return[s(T)]},proxy:!0}]),model:{value:e.isSettingsDrawerOpen,callback:function(i){e.isSettingsDrawerOpen=i},expression:"isSettingsDrawerOpen"}},[s("div",{staticClass:"settingsDrawerContainer"},[s("div",{attrs:{id:"topBlock"}},[s(M),s(g),s("SettingsCommonPanel",{attrs:{"admin-menu":!1}}),s(g)],1),s("div",{attrs:{id:"footerGroup"}},[s(P),s(y)],1)])])},St=[],xt=c(wt,$t,St,!1,null,"2056891c",null,null);const L=xt.exports;const yt={name:"AdminTitleToolbar",components:{SettingsDrawerButton:U},computed:{...B(f,["isSettingsDrawerOpen"]),rightSpace(){return this.$vuetify.breakpoint.mdAndUp}},mounted(){this.isSettingsDrawerOpen=!this.$vuetify.breakpoint.mobile}};var Tt=function(){var e=this,s=e._self._c;return s(H,{staticClass:"codexToolbar",class:{rightSpace:e.rightSpace},attrs:{id:"titleBar",dense:""}},[s("div",{attrs:{id:"buttonSpacer"}}),s(v),s(X,[e._v("Codex Administration")]),s(v),s("SettingsDrawerButton",{class:{invisible:e.isSettingsDrawerOpen},attrs:{disabled:e.isSettingsDrawerOpen,plain:e.isSettingsDrawerOpen},on:{click:function(i){e.isSettingsDrawerOpen=!0}}})],1)},kt=[],Ct=c(yt,Tt,kt,!1,null,"a177eab6",null,null);const W=Ct.exports;const Ot={name:"AdminTabs",data(){return{activeTab:"Libraries",tabs:["Users","Groups","Libraries","Flags","Tasks"],innerHeight:window.innerHeight}},computed:{...R(f,["librariesExist"]),rightSpace(){return this.$vuetify.breakpoint.mdAndUp}},watch:{$route(t){const s=t.path.split("/").at(-1);this.activeTab=s[0].toUpperCase()+s.slice(1)}},mounted(){window.addEventListener("resize",this.onResize)},unmounted(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){this.innerHeight=window.innerHeight}}};var At=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"tabContainer"}},[s(lt,{class:{rightSpace:e.rightSpace},attrs:{id:"tabs",centered:"",grow:"","show-arrows":""}},e._l(e.tabs,function(i){return s(ht,{key:i,attrs:{to:i.toLowerCase()},model:{value:e.activeTab,callback:function(n){e.activeTab=n},expression:"activeTab"}},[e._v(" "+e._s(i)+" ")])}),1),s(z,{attrs:{id:"tabItems",touchless:""},model:{value:e.activeTab,callback:function(i){e.activeTab=i},expression:"activeTab"}},e._l(e.tabs,function(i){return s(dt,{key:i,staticClass:"tabItemContainer",attrs:{value:i}},[i===e.activeTab?s("router-view",{attrs:{"inner-height":e.innerHeight}}):e._e()],1)}),1),e.librariesExist?e._e():s("div",{attrs:{id:"noLibraries"}},[e._v(" Codex has no libraries. Select the Libraries tab and add a comic library. ")])],1)},Bt=[],Rt=c(Ot,At,Bt,!1,null,"d233a29c",null,null);const Dt=Rt.exports;const It={name:"MainAdmin",components:{AdminTitleToolbar:W,AdminTabs:Dt,AdminSettingsDrawer:L},computed:{...R(et,["isUserAdmin"])}};var zt=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"adminWrapper"}},[e.isUserAdmin?s("div",{attrs:{id:"adminContainer"}},[s(st,[s(W),s("AdminTabs")],1),s(L,{ref:"settingsDrawer"})],1):s("div",{attrs:{id:"announcement"}},[s("h1",[s("router-link",{attrs:{to:{name:"home"}}},[e._v(" Log in ")]),e._v(" as an Administrator to use this panel ")],1)])])},Pt=[],Mt=c(It,zt,Pt,!1,null,"bab2069c",null,null);const Gt=Mt.exports;export{Gt as default};
