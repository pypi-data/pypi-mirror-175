import{n as s,a4 as r,r as a,e as i}from"./main.141e7d0d.js";import{a as c}from"./VSubheader.e1bc87f1.js";import{a4 as u,k as l,n as p,a5 as d}from"./submit-footer.3a28165c.js";import{c as m,b as f}from"./confirm-footer.250ecba9.js";import{_ as h}from"./index.73d698b2.js";import{_}from"./confirm-dialog.a1a8380f.js";import{_ as v}from"./VSelect.b8db0c6e.js";const g={name:"RelationChips",props:{pks:{type:Array,required:!0},map:{type:Object,required:!0}}};var w=function(){var e=this,t=e._self._c;return t("span",e._l(e.pks,function(o){return t(c,{key:o,attrs:{small:""}},[e._v(" "+e._s(e.map[o])+" ")])}),1)},b=[],R=s(g,w,b,!1,null,"95754ef2",null,null);const H=R.exports,$={name:"AdminCreateUpdateButton",props:{update:{type:Boolean,default:!1},table:{type:String,required:!0}},data(){return{mdiPencil:u}}};var y=function(){var e=this,t=e._self._c;return t(m,e._g({attrs:{ripple:"",rounded:"",icon:e.update}},e.$listeners),[e.update?t(h,[e._v(e._s(e.mdiPencil))]):t("span",[e._v("+ "+e._s(e.table))])],1)},D=[],A=s($,y,D,!1,null,null,null,null);const C=A.exports;const k={name:"AdminCreateUpdateDialog",components:{AdminCreateUpdateButton:C,SubmitFooter:l},props:{table:{type:String,required:!0},oldRow:{type:[Object,Boolean],default:!1},inputs:{type:Object,required:!0}},data(){return{row:{},showDialog:!1}},computed:{submitButtonEnabled:function(){let n=!1;for(const[t,o]of Object.entries(this.row))if(!r.isEqual(this.oldRow[t],o)){n=!0;break}if(!n)return!1;const e=this.$refs.form;return e&&e.validate()},verb(){return this.oldRow?"Update":"Add"}},watch:{showDialog(n){this.row=this.getRow(n)}},methods:{...a(i,["createRow","updateRow"]),change(n){this.row=n},getRow(n){if(!n||!this.oldRow)return r.cloneDeep(this.inputs.EMPTY_ROW);const e={};for(const t of this.inputs.UPDATE_KEYS)e[t]=r.cloneDeep(this.oldRow[t]);return e},doUpdate:function(){const n={};for(const[e,t]of Object.entries(this.row))r.isEqual(this.oldRow[e],t)||(n[e]=t);this.updateRow(this.table,this.oldRow.pk,n).then(()=>(this.showDialog=!1,!0)).catch(console.error)},doCreate:function(){this.createRow(this.table,this.row).then(()=>(this.showDialog=!1,!0)).catch(console.error)},submit:function(){if(!this.$refs.form.validate()){console.warn("submit attempted with invalid form");return}this.oldRow?this.doUpdate():this.doCreate()}}};var x=function(){var e=this,t=e._self._c;return t(f,e._b({staticClass:"cuDialog",attrs:{transition:"scale-transition","overlay-opacity":"0.5"},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t("AdminCreateUpdateButton",e._g({attrs:{update:Boolean(e.oldRow),table:e.table}},o))]}}]),model:{value:e.showDialog,callback:function(o){e.showDialog=o},expression:"showDialog"}},"v-dialog",e.$attrs,!1),[t(p,{ref:"form",staticClass:"cuForm"},[t(e.inputs,{tag:"component",attrs:{"old-row":e.oldRow},on:{change:e.change}}),t(l,{attrs:{verb:e.verb,table:e.table,disabled:!e.submitButtonEnabled},on:{submit:e.submit,cancel:function(o){e.showDialog=!1}}})],1)],1)},q=[],U=s(k,x,q,!1,null,"c8d60f95",null,null);const I=U.exports,B={name:"AdminDeleteRowDialog",components:{ConfirmDialog:_},props:{table:{type:String,required:!0},pk:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{mdiTrashCan:d}},computed:{titleText(){return`Delete ${this.table}`}},methods:{...a(i,["deleteRow"]),confirm(){this.deleteRow(this.table,this.pk),this.showDialog=!1}}};var S=function(){var e=this,t=e._self._c;return t(_,{attrs:{icon:e.mdiTrashCan,"title-text":e.titleText,"object-name":e.name,"confirm-text":e.titleText},on:{confirm:e.confirm}})},E=[],F=s(B,S,E,!1,null,null,null,null);const J=F.exports,T={name:"AdminRelationPicker"};var j=function(){var e=this,t=e._self._c;return t(v,e._g(e._b({attrs:{chips:"","deletable-chips":"",dense:"",multiple:!0,"small-chips":""}},"v-select",e.$attrs,!1),e.$listeners))},O=[],P=s(T,j,O,!1,null,null,null,null);const L=P.exports;export{L as A,H as _,J as a,I as b};
