import{ab as p,d as u,_ as r,a as o,p as _,C as v,b as l,ac as f,m as b,a9 as g,ad as k}from"./submit-footer.4e25f04d.js";import{b as C,e as s,r as m,n as c,f as h,g as A,d as I}from"./main.bc7f684f.js";import{_ as d}from"./button.3ce30493.js";import{c as S}from"./confirm-footer.fd7b667d.js";import{_ as i}from"./index.e954868e.js";import"./VInput.56b67ace.js";import"./VItemGroup.103183dd.js";import"./change-password-dialog.fea5d640.js";import"./index.5b23bdea.js";const T={name:"AdminStatusList",data(){return{mdiCloseCircleOutline:p}},computed:{...C(s,{librarianStatuses:a=>a.librarianStatuses,show:a=>a.librarianStatuses.length>0})},created(){this.load()},methods:{...m(s,["loadTable","librarianTask"]),indeterminate:a=>!a.preactive&&+a.total==0,progress(a){return a.preactive||+a.total==0?0:100*+a.complete/+a.total},load(){this.loadTable("LibrarianStatus")},clear(){this.librarianTask("librarian_clear_status","")}}};var L=function(){var e=this,t=e._self._c;return t(d,[e.show?t(u):e._e(),t(r,{attrs:{ripple:""},on:{click:e.load}},[t(o,[t(_,[e.show?t("div",[t(S,{attrs:{id:"clearButton",small:"",ripple:"",icon:"",title:"Clear Librarian Statuses"},on:{click:e.clear}},[t(i,[e._v(e._s(e.mdiCloseCircleOutline))])],1),t("h4",[e._v("Librarian Tasks")]),e._l(e.librarianStatuses,function(n){return t(_,{key:`${n.type} ${n.name}`},[t("div",{staticClass:"statusItem",attrs:{nav:""}},[t("div",{staticClass:"statusItemTitle"},[e._v(" "+e._s(n.type)+" "+e._s(n.name)+" "),+n.total?t("span",[e._v(" "+e._s(n.complete)+"/"+e._s(n.total)+" ")]):e._e()]),t(v,{attrs:{color:"#cc7b19",indeterminate:e.indeterminate(n),value:e.progress(n),bottom:""}})],1)])})],2):t(l,{attrs:{id:"noTasksRunning"}},[e._v(" No librarian tasks running ")])],1)],1)],1)],1)},$=[],y=c(T,L,$,!1,null,"a614adc7",null,null);const F=y.exports;const O={name:"AdminMenu",components:{AdminStatusList:F},props:{menu:{type:Boolean,default:!0}},data(){return{mdiBookAlert:f,mdiOpenInNew:b,mdiDatabaseClockOutline:g,mdiCogOutline:k}},computed:{...h(A,["isUserAdmin"]),...I(s,{unseenFailedImports:a=>a.unseenFailedImports})},methods:{...m(s,["clearFailedImports","librarianTask"])}};var x=function(){var e=this,t=e._self._c;return e.isUserAdmin?t("div",[e.menu?t(d,[t(r,{attrs:{ripple:""},on:{click:function(n){return e.librarianTask("poll")}}},[t(o,[t(l,[t(i,[e._v(e._s(e.mdiDatabaseClockOutline))]),e._v("Poll All Libraries")],1)],1)],1),t(r,{attrs:{to:{name:"admin"},ripple:""},on:{click:function(n){e.unseenFailedImports=!1}}},[t(o,[t(l,[t(i,[e._v(e._s(e.mdiCogOutline))]),e._v("Admin Panel "),e.unseenFailedImports?t(i,{attrs:{id:"failedImportsIcon",title:"New Failed Imports"}},[e._v(" "+e._s(e.mdiBookAlert)+" ")]):e._e()],1)],1)],1)],1):e._e(),t("AdminStatusList")],1):e._e()},w=[],B=c(O,x,w,!1,null,"7fa13de5",null,null);const G=B.exports;export{G as default};
