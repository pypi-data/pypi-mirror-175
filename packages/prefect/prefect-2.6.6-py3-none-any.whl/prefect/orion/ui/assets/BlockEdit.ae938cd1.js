import{d as B,u as D,aH as w,r as p,f as x,i as e,o as C,g,w as c,h as s,b7 as $,b8 as P,p as T,b2 as A,b0 as E,q as H,aU as k,am as i,G as I}from"./index.52801128.js";import{u as N}from"./useRouteParam.2cd4d7eb.js";import{u as R}from"./usePageTitle.2eedd110.js";const F=B({__name:"BlockEdit",async setup(S){let o,n;const l=D(),u=N("blockDocumentId"),a=([o,n]=w(()=>k.getBlockDocument(u.value)),o=await o,n(),o),{blockType:_,blockSchema:b}=a,r=p(a.data),m=p(a.name);function f(d){k.updateBlockDocument(a.id,d).then(()=>{i("Block updated successfully","success"),l.push(I.block(u.value))}).catch(t=>{i("Failed to update block","error"),console.error(t)})}function h(){l.back()}return R(`Edit Block: ${m.value}`),(d,t)=>{const y=x("p-layout-default");return e(a)?(C(),g(y,{key:0,class:"block-edit"},{header:c(()=>[s(e($),{"block-document":e(a)},null,8,["block-document"])]),default:c(()=>[s(e(E),{"block-type":e(_)},{default:c(()=>[s(e(P),T({data:r.value,"onUpdate:data":t[0]||(t[0]=v=>r.value=v)},{name:m.value,blockSchema:e(b)},A({submit:f,cancel:h})),null,16,["data"])]),_:1},8,["block-type"])]),_:1})):H("",!0)}}});export{F as default};
