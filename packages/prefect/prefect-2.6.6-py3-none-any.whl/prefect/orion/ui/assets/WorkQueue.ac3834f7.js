import{d as j,u as z,b as s,r as v,a as Q,aE as E,ac as G,aK as R,aL as I,aM as M,a6 as H,f as c,o as a,g as n,w as o,i as e,aN as J,q as r,h as i,aO as X,aP as b,s as Y,aQ as Z,D as ee,ag as ue,m as te,G as se,av as oe}from"./index.52801128.js";import{u as ae}from"./useRouteParam.2cd4d7eb.js";import{u as ne}from"./useToast.116f2a11.js";import{u as re}from"./usePageTitle.2eedd110.js";const le={class:"work-queue__upcoming-runs"},_e=j({__name:"WorkQueue",setup(ce){const q=z(),y=ne(),g=s(()=>{const t=["Upcoming Runs","Runs"];return te.xl||t.unshift("Details"),t}),F=ae("id"),C=s(()=>`prefect agent start ${u.value?` --work-queue "${u.value.name}"`:""}`),d=v([]),w=v(),h=()=>{d.value=["running","pending"],w.value="Runs"},W={interval:3e5},k=Q(E.getWorkQueue,[F.value],W),u=s(()=>k.response),m=s(()=>{var t;return(t=u.value)==null?void 0:t.concurrencyLimit}),$=s(()=>{var t;return(t=u.value)==null?void 0:t.isPaused}),f=s(()=>!!(m.value&&m.value<=V.value&&!$.value)),p=s(()=>u.value?[u.value.name]:[]),x=G({workQueues:p}),N=R({workQueues:p}),P=s(()=>f.value?N.value:x.value),T=()=>{q.push(se.workQueues())},U=s(()=>u.value?`Work Queue: ${u.value.name}`:"Work Queue");re(U);const A=I(M),B=R({states:["Running","Pending"],workQueues:p}),S=Q(A.getFlowRunsCount,[B.value],{interval:3e4}),V=s(()=>{var t;return(t=S.response)!=null?t:[]});return H(()=>{var t;return(t=u.value)==null?void 0:t.deprecated},t=>{t&&y(oe.info.deprecatedWorkQueue,"default",{dismissible:!1,timeout:!1})}),(t,l)=>{const D=c("p-button"),K=c("p-tabs"),L=c("p-layout-well"),O=c("p-layout-default");return a(),n(O,{class:"work-queue"},{header:o(()=>[e(u)?(a(),n(e(J),{key:0,"work-queue":e(u),onUpdate:e(k).refresh,onDelete:T},null,8,["work-queue","onUpdate"])):r("",!0)]),default:o(()=>[i(L,{class:"work-queue__body"},{header:o(()=>[i(e(X),{command:e(C),title:"Work queue is ready to go!",subtitle:"Work queues define the work to be done and agents poll a specific work queue for new work."},null,8,["command"])]),well:o(()=>[e(u)?(a(),n(e(b),{key:0,alternate:"","work-queue":e(u)},null,8,["work-queue"])):r("",!0)]),default:o(()=>[i(K,{selected:w.value,"onUpdate:selected":l[1]||(l[1]=_=>w.value=_),tabs:e(g)},{details:o(()=>[e(u)?(a(),n(e(b),{key:0,"work-queue":e(u)},null,8,["work-queue"])):r("",!0)]),"upcoming-runs":o(()=>[Y("div",le,[e(u)?(a(),n(e(Z),{key:0,"work-queue":e(u)},null,8,["work-queue"])):r("",!0),e(f)?(a(),n(D,{key:1,secondary:"",class:"work-queue__active-runs-button",onClick:h},{default:o(()=>[ee(" Show active runs ")]),_:1})):r("",!0)])]),runs:o(()=>[i(e(ue),{states:d.value,"onUpdate:states":l[0]||(l[0]=_=>d.value=_),"flow-run-filter":e(P)},null,8,["states","flow-run-filter"])]),_:1},8,["selected","tabs"])]),_:1})]),_:1})}}});export{_e as default};
