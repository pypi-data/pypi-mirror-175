(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4249],{58122:function(e,n,r){"use strict";r.d(n,{CL:function(){return f},FS:function(){return v},JZ:function(){return g},e7:function(){return b},v0:function(){return p},wx:function(){return h}});var i=r(12757),t=r(82394),u=r(43313),c=r(93348),o=r(32151),l=r(5679),s=r(84779);function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function p(e){var n=e.statistics,r=Object.keys(n),i=Array(u.Dy.length).fill(0);return 0===r.length?null:(r.forEach((function(e){if(u.Dy.includes(e)){var r=u.CC[e],t=n[e],c=t,o=!1,l=[2,3],a=u.Ub[e],d=u.oH[e],p=u.OD[e];if(u.y_.includes(e))o=!0,l=[2,1,2];else if(e in u.Sq){t=(0,s.Jw)(t,0);var f=u.Sq[e];c=n[f]}var v={columnFlexNumbers:l,name:r,progress:o,rate:c,successDirection:d,warning:p};u.y_.includes(e)||(v.value=t),i[a]=v}})),i)}function f(e){var n=e.columnTypes,r=void 0===n?{}:n,i=e.statistics,t=Object.keys(i);if(0===t.length)return null;var c=Object.values(r),s=c.length,a=[];a.push({name:"Column count",successDirection:u.oH.column_count,value:(0,l.x6)(s)}),t.forEach((function(e){if(u.Zu.includes(e)){var n=u.CC[e],r=i[e],t=u.OD[e];a.push({name:n,successDirection:u.oH[e],value:(0,l.x6)(r),warning:t})}}));var d=(0,o.QO)(c),p=d.countCategory,f=d.countDatetime,v=d.countNumerical;return a.push({name:"Categorical Features",rate:p/s,value:(0,l.x6)(p)},{name:"Numerical Features",rate:v/s,value:(0,l.x6)(v)},{name:"Datetime Features",rate:f/s,value:(0,l.x6)(f)}),a}function v(e){return"string"===typeof e?e:JSON.stringify(e)}function h(e,n){var r,i;return null===e||void 0===e||null===(r=e.find((function(e){var r=e.block;return n(r)})))||void 0===r||null===(i=r.variables)||void 0===i?void 0:i.map((function(e){var n=e.value;return d(d({},e),{},{value:v(n)})}))}function g(e,n){return n===c.Xm.TIME?e.push({uuid:"execution_date",value:"<run datetime>"}):n===c.Xm.EVENT&&e.push({uuid:"event",value:"<trigger event>"}),e}function b(e){return e?Object.entries(e).reduce((function(e,n){var r=(0,i.Z)(n,2),u=r[0],c=r[1],o=c;try{o=JSON.parse(c)}catch(l){}return d(d({},e),{},(0,t.Z)({},u,o))}),{}):e}},93348:function(e,n,r){"use strict";r.d(n,{U5:function(){return o},Xm:function(){return t},Z4:function(){return l},fq:function(){return c}});var i,t,u=r(82394);!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(t||(t={}));var c,o,l=(i={},(0,u.Z)(i,t.API,(function(){return"API"})),(0,u.Z)(i,t.EVENT,(function(){return"event"})),(0,u.Z)(i,t.TIME,(function(){return"schedule"})),i);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(c||(c={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly"}(o||(o={}))},1410:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return U}});var i=r(77837),t=r(82394),u=r(12757),c=r(38860),o=r.n(c),l=r(12691),s=r.n(l),a=r(82684),d=r(83455),p=r(34376),f=r(60328),v=r(86532),h=r(34744),g=r(87372),b=r(31866),m=r(10919),j=r(38965),x=r(93348),y=r(86673),O=r(19711),Z=r(46313),P=r(23831),_=r(73942),w=r(49125),C=r(37391),E=Z.default.div.withConfig({displayName:"indexstyle__ContainerStyle",componentId:"sc-1xgfh62-0"})(["border-bottom:1px solid ",";padding:","px;"],P.Z.borders.medium,w.tr),k=Z.default.div.withConfig({displayName:"indexstyle__CardsStyle",componentId:"sc-1xgfh62-1"})([""," height:80px;display:flex;overflow-x:scroll;"],C.w5),I=Z.default.div.withConfig({displayName:"indexstyle__VariableCardStyle",componentId:"sc-1xgfh62-2"})(["background-color:",";border-radius:","px;flex-shrink:0;margin-right:","px;padding:","px;"],P.Z.background.output,_.n_,w.iI,w.tr),T=r(73899),S=r(58122),D=r(28598);var N=function(e){var n=e.hasOverride,r=e.scheduleType,i=e.variables,t=[];return Object.entries(i).forEach((function(e){var n=(0,u.Z)(e,2),r=n[0],i=n[1];t.push({uuid:r,value:(0,S.FS)(i)})})),(0,S.JZ)(t,r),(0,D.jsxs)(E,{children:[(0,D.jsx)(y.Z,{mb:2,children:(0,D.jsxs)(O.ZP,{bold:!0,large:!0,monospace:!0,muted:!0,children:["Runtime variables",n&&" (override)"]})}),(0,D.jsx)(k,{noScrollbarTrackBackground:!0,children:i&&t.map((function(e){var n=e.uuid,r=e.value;return(0,D.jsxs)(I,{children:[(0,D.jsx)(O.ZP,{monospace:!0,small:!0,children:n}),(0,D.jsx)(O.ZP,{color:T.Or,monospace:!0,small:!0,children:(0,S.FS)(r)})]})}))})]})},A=r(17903),V=r(41374),q=r(10503),F=r(59920),R=r(7715),B=r(96510),H=r(66653),L=r(5679);function M(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function z(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?M(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function J(e){var n=e.pipeline,r=(0,p.useRouter)(),i=n.uuid,c=V.ZP.variables.pipelines.list(i).data,o=null===c||void 0===c?void 0:c.variables,l=V.ZP.pipeline_schedules.pipelines.list(i),Z=l.data,P=l.mutate,_=(0,a.useMemo)((function(){return(null===Z||void 0===Z?void 0:Z.pipeline_schedules)||[]}),[Z]),C=(0,d.Db)(V.ZP.pipeline_schedules.pipelines.useCreate(i),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(e){var i=e.pipeline_schedule.id;return r.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(null===n||void 0===n?void 0:n.uuid,"/triggers/").concat(i,"/edit"))},onErrorCallback:function(e){var n=e.error,r=n.errors,i=n.message;console.log(r,i)}})}}),E=(0,u.Z)(C,2),k=E[0],I=E[1].isLoading,T=(0,d.Db)((function(e){return V.ZP.pipeline_schedules.useUpdate(e.id)({pipeline_schedule:e})}),{onSuccess:function(e){return(0,B.wD)(e,{callback:function(){P()},onErrorCallback:function(e){var n=e.error,r=n.errors,i=n.message;console.log(r,i)}})}}),M=(0,u.Z)(T,2),J=M[0],U=(M[1].isLoading,(0,a.useState)()),X=U[0],Y=U[1],G=(0,a.useMemo)((function(){var e,n=null===(e=(0,S.wx)(o,(function(e){return"global"===e.uuid})))||void 0===e?void 0:e.reduce((function(e,n){var r=n.uuid,i=n.value;return z(z({},e),{},(0,t.Z)({},r,i))}),{}),r=null===X||void 0===X?void 0:X.variables,u=!(0,R.Qr)(r),c=u?null===X||void 0===X?void 0:X.variables:(0,R.Qr)(n)?null:n;return function(e){var n=e.height-(c?151:0);return(0,D.jsxs)(D.Fragment,{children:[c&&(0,D.jsx)(N,{hasOverride:u,variables:c,scheduleType:null===X||void 0===X?void 0:X.schedule_type}),!c&&(0,D.jsxs)(y.Z,{p:w.cd,children:[(0,D.jsx)(O.ZP,{children:"This pipeline has no runtime variables."}),(0,D.jsxs)(y.Z,{mt:1,children:[(0,D.jsx)(s(),{as:"/pipelines/".concat(i,"/edit?sideview=variables"),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,D.jsx)(m.Z,{children:"Click here"})})," ",(0,D.jsx)(O.ZP,{inline:!0,children:"to add variables to this pipeline."})]})]}),(0,D.jsx)(v.Z,z(z({},e),{},{height:n,noStatus:!0}))]})}}),[o,X]);return(0,D.jsxs)(j.Z,{breadcrumbs:[{label:function(){return"Triggers"}}],buildSidekick:G,pageName:F.M.TRIGGERS,pipeline:n,subheaderBackgroundImage:"/images/banner-shape-purple-peach.jpg",subheaderButton:(0,D.jsx)(b.ZP,{blackBorder:!0,beforeElement:(0,D.jsx)(q.mm,{size:2.5*w.iI}),inline:!0,loading:I,noHoverUnderline:!0,onClick:function(){return k({pipeline_schedule:{name:(0,L.Y6)()}})},sameColorAsText:!0,uuid:"PipelineDetailPage/add_new_schedule",children:"Create"}),subheaderText:(0,D.jsx)(O.ZP,{bold:!0,large:!0,children:"Set up a new trigger for this pipeline."}),title:function(e){var n=e.name;return"".concat(n," triggers")},uuid:"".concat(F.M.TRIGGERS,"_").concat(i),children:[(0,D.jsx)(y.Z,{mt:w.cd,px:w.cd,children:(0,D.jsx)(g.Z,{level:5,children:"Pipeline triggers"})}),(0,D.jsx)(h.Z,{light:!0,mt:w.cd,short:!0}),(0,D.jsx)(A.Z,{columnFlex:[null,1,1,3,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:"Status"},{uuid:"Type"},{uuid:"Name"},{uuid:"Frequency"},{uuid:"Runs"},{uuid:"Logs"},{label:function(){return""},uuid:"edit"}],isSelectedRow:function(e){return _[e].id===(null===X||void 0===X?void 0:X.id)},onClickRow:function(e){return Y(_[e])},rows:_.map((function(e){var n,t=e.id,u=e.pipeline_runs_count,c=e.name,o=e.schedule_interval,l=e.status;return[(0,D.jsx)(f.Z,{iconOnly:!0,noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,H.j)(n),J({id:e.id,status:x.fq.ACTIVE===l?x.fq.INACTIVE:x.fq.ACTIVE})},children:x.fq.ACTIVE===l?(0,D.jsx)(q.dz,{muted:!0,size:2*w.iI}):(0,D.jsx)(q.Py,{default:!0,size:2*w.iI})}),(0,D.jsx)(O.ZP,{default:x.fq.INACTIVE===l,monospace:!0,success:x.fq.ACTIVE===l,children:l}),(0,D.jsx)(O.ZP,{default:!0,monospace:!0,children:null===(n=x.Z4[e.schedule_type])||void 0===n?void 0:n.call(x.Z4)}),(0,D.jsx)(s(),{as:"/pipelines/".concat(i,"/triggers/").concat(t),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,D.jsx)(m.Z,{bold:!0,onClick:function(e){(0,H.j)(e),r.push("/pipelines/[pipeline]/triggers/[...slug]","/pipelines/".concat(i,"/triggers/").concat(t))},sameColorAsText:!0,children:c})}),(0,D.jsx)(O.ZP,{default:!0,monospace:!0,children:o}),(0,D.jsx)(O.ZP,{default:!0,monospace:!0,children:u}),(0,D.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return r.push("/pipelines/".concat(i,"/logs?pipeline_schedule_id[]=").concat(t))},children:(0,D.jsx)(q.B4,{default:!0,size:2*w.iI})}),(0,D.jsx)(f.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return r.push("/pipelines/".concat(i,"/triggers/").concat(t,"/edit"))},children:(0,D.jsx)(q.I8,{default:!0,size:2*w.iI})})]})),uuid:"pipeline-triggers"})]})}J.getInitialProps=function(){var e=(0,i.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.query.pipeline,e.abrupt("return",{pipeline:{uuid:r}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var U=J},40183:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/triggers",function(){return r(1410)}])}},function(e){e.O(0,[4259,2740,6674,1774,4804,3668,2874,1374,6182,1404,8965,2151,5703,9774,2888,179],(function(){return n=40183,e(e.s=n);var n}));var n=e.O();_N_E=n}]);