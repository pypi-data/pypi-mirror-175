#!/bin/bash
echo "应用启动入口（开发版）"



export GITUP_URL="https://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@github.com/codeh007/mtxtun.git/bin/entry|https://github.com/WordPress/WordPress.git"
export PORT=3000
      # wordpress
export WORDPRESS_DB_HOST=mysqldb
export WORDPRESS_DB_USER=root
export WORDPRESS_DB_PASSWORD=${MYSQL_ROOT_PASSWORD}
export WORDPRESS_DB_NAME=
export WORDPRESS_DEBUG=${WORDPRESS_DEBUG}

      # mtxcms
export MTX_DB_HOST=postgres_db
export MTX_DB_PORT=5432
export MTX_DB_SCHEMA=public
export MTX_DB_USER=postgres
export MTX_DB_PASSWORD=feihuo321
export MTX_DB_NAME=mtxcms
export DATABASE_URL=postgresql://${MTX_DB_USER}:${MTX_DB_PASSWORD}@${MTX_DB_HOST}:${MTX_DB_PORT}/${MTX_DB_NAME}?sslmode=prefer

# nginx
. .venv/bin/activate
# python3 setup.py install 
# mtnginx &
# ./manage.py runserver 0.0.0.0:8000 & 
# python3 -m ptvsd --host 0.0.0.0 --port 5679 --wait main.py
# python3 -m ptvsd --host 0.0.0.0 --port 5679 main.py

# python setup.py develop
set -e
mtx

echo "finished"
sleep 99d