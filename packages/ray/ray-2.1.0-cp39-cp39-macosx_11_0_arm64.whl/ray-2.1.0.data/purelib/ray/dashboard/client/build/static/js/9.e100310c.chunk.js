(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[9],{514:function(e,a,t){"use strict";var n=t(438),l=t(485),r=t(0),c=t.n(r);a.a=function(e){var a=e.loading;return c.a.createElement(n.a,{open:a,style:{zIndex:100}},c.a.createElement(l.a,{color:"primary"}))}},538:function(e,a,t){"use strict";t.r(a);var n=t(7),l=t(118),r=t(161),c=t(478),i=t(521),o=t(503),s=t(494),m=t(520),d=t(64),u=t.n(d),v=t(0),p=t.n(v),E=t(67),b=t(516),g=t(514),f=t(515),N=t(111),h=t(110),j=t(522),O=t(512),k=t(8),y=t.n(k),x=t(16),w=t(81),C=t(113),_=["tags"],P=Object(r.a)((function(e){return{root:{padding:e.spacing(2)},paper:{padding:e.spacing(2),marginTop:e.spacing(2),marginBottom:e.spacing(2)},label:{fontWeight:"bold"},tab:{marginBottom:e.spacing(2)}}})),R=["local_total_resource","local_available_resource","actor_stats","task_dependency_manager_stats","reconstruction_policy_stats","scheduling_queue_stats","object_manager_stats"],D=function(e){var a,t=e.view;if(!t)return null;var n=t.tags,r=void 0===n?"":n,i=Object(l.a)(t,_);return p.a.createElement(c.a,{item:!0,xs:6},p.a.createElement("span",null,null===(a=r.split(",").pop())||void 0===a?void 0:a.split(":").slice(1).join(":")),"=",Object.keys(i).length>0?JSON.stringify(Object.values(i).pop()):p.a.createElement("span",{style:{color:"gray"}},"null"))};a.default=function(e){var a,t=P(),l=function(e){var a=e.match.params,t=Object(v.useState)("info"),l=Object(n.a)(t,2),r=l[0],c=l[1],i=Object(v.useState)(),o=Object(n.a)(i,2),s=o[0],m=o[1],d=Object(v.useState)("Loading the node infos..."),u=Object(n.a)(d,2),p=u[0],E=u[1],b=Object(v.useContext)(w.a).namespaceMap,g=Object(v.useState)(!0),f=Object(n.a)(g,2),N=f[0],h=f[1],j=Object(v.useRef)(),O=Object(v.useCallback)(Object(x.a)(y.a.mark((function e(){var t,n,l,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(C.a)(a.id);case 4:t=e.sent,n=t.data,l=n.data,r=n.msg,c=n.result,(null===l||void 0===l?void 0:l.detail)&&m(l.detail),r&&E(r),!1===c&&(E("Node Query Error Please Check Node Name"),h(!1)),j.current=setTimeout(O,4e3);case 11:case"end":return e.stop()}}),e)}))),[N,a.id]),k=null===s||void 0===s?void 0:s.raylet;return Object(v.useEffect)((function(){return O(),function(){j.current&&clearTimeout(j.current)}}),[O]),{params:a,selectedTab:r,nodeDetail:s,msg:p,isRefreshing:N,onRefreshChange:function(e){h(e.target.checked)},raylet:k,handleChange:function(e,a){c(a)},namespaceMap:b}}(e),r=l.params,d=l.selectedTab,k=l.nodeDetail,_=l.msg,S=l.isRefreshing,T=l.onRefreshChange,M=l.raylet,A=l.handleChange;return p.a.createElement("div",{className:t.root},p.a.createElement(g.a,{loading:_.startsWith("Loading")}),p.a.createElement(h.a,{title:"NODE - ".concat(r.id)},p.a.createElement(N.a,{type:"node",status:(null===k||void 0===k||null===(a=k.raylet)||void 0===a?void 0:a.state)||"LOADING"}),p.a.createElement("br",null),"Auto Refresh:",p.a.createElement(i.a,{checked:S,onChange:T,name:"refresh",inputProps:{"aria-label":"secondary checkbox"}}),p.a.createElement("br",null),"Request Status: ",_),p.a.createElement(h.a,{title:"Node Detail"},p.a.createElement(o.a,{value:d,onChange:A,className:t.tab},p.a.createElement(s.a,{value:"info",label:"Info"}),p.a.createElement(s.a,{value:"raylet",label:"Raylet"}),p.a.createElement(s.a,{value:"worker",label:"Worker (".concat((null===k||void 0===k?void 0:k.workers.length)||0,")")}),p.a.createElement(s.a,{value:"actor",label:"Actor (".concat(Object.values((null===k||void 0===k?void 0:k.actors)||{}).length||0,")")})),k&&"info"===d&&p.a.createElement("div",{className:t.paper},p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Hostname")," ",k.hostname),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"IP")," ",k.ip)),p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},k.cpus&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:t.label},"CPU (Logic/Physic)")," ",k.cpus[0],"/ ",k.cpus[1])),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Load (1/5/15min)")," ",(null===k||void 0===k?void 0:k.loadAvg[0])&&k.loadAvg[0].map((function(e){return Number(e).toFixed(2)})).join("/"))),p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Load per CPU (1/5/15min)")," ",(null===k||void 0===k?void 0:k.loadAvg[1])&&k.loadAvg[1].map((function(e){return Number(e).toFixed(2)})).join("/")),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Boot Time")," ",u()(1e3*k.bootTime).format("YYYY/MM/DD HH:mm:ss"))),p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Sent Tps")," ",Object(O.a)(null===k||void 0===k?void 0:k.networkSpeed[0]),"/s"),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Recieved Tps")," ",Object(O.a)(null===k||void 0===k?void 0:k.networkSpeed[1]),"/s")),p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Memory")," ",(null===k||void 0===k?void 0:k.mem)&&p.a.createElement(f.a,{num:Number((null===k||void 0===k?void 0:k.mem[0])-(null===k||void 0===k?void 0:k.mem[1])),total:null===k||void 0===k?void 0:k.mem[0]},Object(O.a)((null===k||void 0===k?void 0:k.mem[0])-(null===k||void 0===k?void 0:k.mem[1])),"/",Object(O.a)(null===k||void 0===k?void 0:k.mem[0]),"(",null===k||void 0===k?void 0:k.mem[2],"%)")),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"CPU")," ",p.a.createElement(f.a,{num:Number(k.cpu),total:100},k.cpu,"%"))),p.a.createElement(c.a,{container:!0,spacing:2},(null===k||void 0===k?void 0:k.disk)&&Object.entries(null===k||void 0===k?void 0:k.disk).map((function(e){var a=Object(n.a)(e,2),l=a[0],r=a[1];return p.a.createElement(c.a,{item:!0,xs:6,key:l},p.a.createElement("div",{className:t.label},"Disk (",l,")")," ",r&&p.a.createElement(f.a,{num:Number(r.used),total:r.total},Object(O.a)(r.used),"/",Object(O.a)(r.total),"(",r.percent,"%, ",Object(O.a)(r.free)," free)"))}))),p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Logs")," ",p.a.createElement(E.b,{to:"/log/".concat(encodeURIComponent(k.logUrl))},"log")))),M&&Object.keys(M).length>0&&"raylet"===d&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:t.paper},p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Command"),p.a.createElement("br",null),p.a.createElement("div",{style:{height:200,overflow:"auto"}},null===k||void 0===k?void 0:k.cmdline.join(" ")))),p.a.createElement(c.a,{container:!0,spacing:2},p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Pid")," ",null===M||void 0===M?void 0:M.pid),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Workers Num")," ",null===M||void 0===M?void 0:M.numWorkers),p.a.createElement(c.a,{item:!0,xs:!0},p.a.createElement("div",{className:t.label},"Node Manager Port")," ",null===M||void 0===M?void 0:M.nodeManagerPort)),R.map((function(e){return M.viewData.find((function(a){return a.viewName===e}))})).map((function(e){return e?p.a.createElement(p.a.Fragment,{key:e.viewName},p.a.createElement("p",{className:t.label},e.viewName.split("_").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ")),p.a.createElement(c.a,{container:!0,spacing:2,style:{maxHeight:177,overflow:"auto"}},e.measures.map((function(e){return p.a.createElement(D,{key:e.tags,view:e})})))):null})))),(null===k||void 0===k?void 0:k.workers)&&"worker"===d&&p.a.createElement(p.a.Fragment,null,p.a.createElement(m.a,{className:t.paper},p.a.createElement(j.b,{workers:null===k||void 0===k?void 0:k.workers,actorMap:null===k||void 0===k?void 0:k.actors}))),(null===k||void 0===k?void 0:k.actors)&&"actor"===d&&p.a.createElement(p.a.Fragment,null,p.a.createElement(m.a,{className:t.paper},p.a.createElement(b.a,{actors:k.actors,workers:null===k||void 0===k?void 0:k.workers})))))}}}]);
//# sourceMappingURL=9.e100310c.chunk.js.map