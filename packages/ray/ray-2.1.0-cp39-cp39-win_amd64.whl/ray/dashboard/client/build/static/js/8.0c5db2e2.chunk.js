(this["webpackJsonpray-dashboard-client"]=this["webpackJsonpray-dashboard-client"]||[]).push([[8],{513:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var n=a(161),r=a(493),o=a(499),c=a(487),l=a(500),i=a(0),s=a.n(i),d=Object(n.a)((function(e){return{search:{margin:e.spacing(1),marginTop:0}}})),u=function(e){var t=e.label,a=e.onChange,n=e.defaultValue,c=d();return s.a.createElement(r.a,{className:c.search,size:"small",label:t,InputProps:{onChange:function(e){var t=e.target.value;a&&a(t)},defaultValue:n,endAdornment:s.a.createElement(o.a,{position:"end"},s.a.createElement(l.a,null))}})},m=function(e){var t=e.label,a=e.onChange,n=e.options,o=d();return s.a.createElement(r.a,{className:o.search,size:"small",label:t,select:!0,SelectProps:{onChange:function(e){var t=e.target.value;a&&a(t)},style:{width:100}}},s.a.createElement(c.a,{value:""},"All"),n.map((function(e){return"string"===typeof e?s.a.createElement(c.a,{value:e},e):s.a.createElement(c.a,{value:e[0]},e[1])})))}},521:function(e,t,a){"use strict";var n=a(1),r=a(2),o=a(0),c=(a(5),a(3)),l=a(4),i=a(9),s=a(6),d=a(112),u=o.forwardRef((function(e,t){var a=e.classes,l=e.className,i=e.color,u=void 0===i?"secondary":i,m=e.edge,p=void 0!==m&&m,h=e.size,g=void 0===h?"medium":h,b=Object(r.a)(e,["classes","className","color","edge","size"]),f=o.createElement("span",{className:a.thumb});return o.createElement("span",{className:Object(c.a)(a.root,l,{start:a.edgeStart,end:a.edgeEnd}[p],"small"===g&&a["size".concat(Object(s.a)(g))])},o.createElement(d.a,Object(n.a)({type:"checkbox",icon:f,checkedIcon:f,classes:{root:Object(c.a)(a.switchBase,a["color".concat(Object(s.a)(u))]),input:a.input,checked:a.checked,disabled:a.disabled},ref:t},b)),o.createElement("span",{className:a.track}))}));t.a=Object(l.a)((function(e){return{root:{display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},edgeStart:{marginLeft:-8},edgeEnd:{marginRight:-8},switchBase:{position:"absolute",top:0,left:0,zIndex:1,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),"&$checked":{transform:"translateX(20px)"},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{opacity:.5},"&$disabled + $track":{opacity:"light"===e.palette.type?.12:.1}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(i.c)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.primary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(i.c)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&$disabled":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800]},"&$checked + $track":{backgroundColor:e.palette.secondary.main},"&$disabled + $track":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}},sizeSmall:{width:40,height:24,padding:7,"& $thumb":{width:16,height:16},"& $switchBase":{padding:4,"&$checked":{transform:"translateX(16px)"}}},checked:{},disabled:{},input:{left:"-100%",width:"300%"},thumb:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},track:{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}}),{name:"MuiSwitch"})(u)},537:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(7),o=a(161),c=a(160),l=a(488),i=a(486),s=a(437),d=a(493),u=a(499),m=a(521),p=a(498),h=a(500),g=a(0),b=a.n(g),f=a(117),v=a(513),y=a(110),E=a(8),k=a.n(E),j=a(16),O=a(43),w=function(){var e=Object(j.a)(k.a.mark((function e(t){var a,n,r,o,c,l,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/"!==window.location.pathname&&"log_index"!==t&&(n=window.location.pathname.split("/")).length>1&&(r=n.findIndex((function(e){return e.includes(":")})))>-1&&((o=n.slice(0,r)).push(t.replace(/https?:\/\//,"")),t=o.join("/")),e.next=3,Object(O.b)("log_index"===t?t:"log_proxy?url=".concat(encodeURIComponent(t)));case 3:if(c=e.sent,!(null===(a=c.headers["content-type"])||void 0===a?void 0:a.includes("html"))){e.next=9;break}return(l=document.createElement("div")).innerHTML=c.data,i=[].map.call(l.getElementsByTagName("li"),(function(e){var t=e.children[0],a=t.href;if(!e.innerText.startsWith("http://")&&!e.innerText.startsWith("https://")){var n="".concat(t.protocol,"//").concat(t.host);a=a.substring(n.length)}return{name:e.innerText,href:a}})),e.abrupt("return",i);case 9:return e.abrupt("return",c.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=Object(o.a)((function(e){return{root:{padding:e.spacing(2),width:"100%"},table:{marginTop:e.spacing(4),padding:e.spacing(2)},pageMeta:{padding:e.spacing(2),marginTop:e.spacing(2)},search:{margin:e.spacing(1)}}}));t.default=function(e){var t=C(),a=function(e){var t=e.match.params,a=e.location.search,n=e.theme,o=t.host,c=t.path,l=new URLSearchParams(a),i=l.get("fileName"),s=Object(g.useRef)(null),d=Object(g.useState)(),u=Object(r.a)(d,2),m=u[0],p=u[1],h=Object(g.useState)(),b=Object(r.a)(h,2),f=b[0],v=b[1],y=Object(g.useState)(l.get("fileName")||""),E=Object(r.a)(y,2),k=E[0],j=E[1],O=Object(g.useState)(),C=Object(r.a)(O,2),N=C[0],S=C[1],x=Object(g.useState)(),$=Object(r.a)(x,2),I=$[0],R=$[1],T=Object(g.useState)(),z=Object(r.a)(T,2),L=z[0],U=z[1];return Object(g.useEffect)((function(){j(i||"")}),[i]),Object(g.useEffect)((function(){var e="log_index";S("Loading..."),o?(e=decodeURIComponent(o),p(new URL(e).origin),c&&(e+=decodeURIComponent(c))):p(void 0),w(e).then((function(e){S(e||"(null)")})).catch((function(){S("Failed to load")}))}),[o,c]),{log:N,origin:m,host:o,path:c,el:s,search:f,setSearch:v,theme:n,fileName:k,setFileName:j,startTime:I,setStart:R,endTime:L,setEnd:U}}(e),o=a.log,E=a.origin,k=a.path,j=a.el,O=a.search,N=a.setSearch,S=a.theme,x=a.fileName,$=a.setFileName,I=a.startTime,R=a.setStart,T=a.endTime,z=a.setEnd,L="#/log/";if(E&&k){var U=decodeURIComponent(k).split("/");U.pop(),U.length>1&&(L+=encodeURIComponent(E),L+="/",L+=encodeURIComponent(U.join("/")))}return b.a.createElement("div",{className:t.root,ref:j},b.a.createElement(y.a,{title:"Logs Viewer"},b.a.createElement(c.a,null,!E&&b.a.createElement("p",null,"Please choose an url to see logs for that node"),E&&b.a.createElement("p",null,"Node: ",E,decodeURIComponent(k||"")),E&&b.a.createElement("div",null,b.a.createElement(l.a,{variant:"contained",href:L,className:t.search},"Back To ../"),"object"===typeof o&&b.a.createElement(v.a,{defaultValue:x,label:"File Name",onChange:function(e){$(e)}}))),b.a.createElement(c.a,null,"object"===typeof o&&b.a.createElement(i.a,null,o.filter((function(e){var t;return!x||(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.includes(x))})).map((function(e){return b.a.createElement(s.a,{key:e.name},b.a.createElement("a",{href:"#/log/".concat(E?"".concat(encodeURIComponent(E),"/"):"").concat(encodeURIComponent(e.href))},e.name))}))),"string"===typeof o&&"Loading..."!==o&&b.a.createElement("div",null,b.a.createElement("div",null,b.a.createElement(d.a,{className:t.search,label:"Keyword",InputProps:{onChange:function(e){var t=e.target.value;N(Object(n.a)(Object(n.a)({},O),{},{keywords:t}))},type:"",endAdornment:b.a.createElement(u.a,{position:"end"},b.a.createElement(h.a,null))}}),b.a.createElement(d.a,{className:t.search,label:"Line Number",InputProps:{onChange:function(e){var t=e.target.value;N(Object(n.a)(Object(n.a)({},O),{},{lineNumber:t}))},type:"",endAdornment:b.a.createElement(u.a,{position:"end"},b.a.createElement(h.a,null))}}),b.a.createElement(d.a,{className:t.search,label:"Font Size",InputProps:{onChange:function(e){var t=e.target.value;N(Object(n.a)(Object(n.a)({},O),{},{fontSize:Number(t)}))},type:""}}),b.a.createElement(d.a,{id:"datetime-local",label:"Start Time",type:"datetime-local",value:I,className:t.search,onChange:function(e){R(e.target.value)},InputLabelProps:{shrink:!0}}),b.a.createElement(d.a,{label:"End Time",type:"datetime-local",value:T,className:t.search,onChange:function(e){z(e.target.value)},InputLabelProps:{shrink:!0}}),b.a.createElement("div",{className:t.search},"Reverse:"," ",b.a.createElement(m.a,{checked:null===O||void 0===O?void 0:O.revert,onChange:function(e,t){return N(Object(n.a)(Object(n.a)({},O),{},{revert:t}))}}),b.a.createElement(l.a,{className:t.search,variant:"contained",onClick:function(){R(""),z("")}},"Reset Time"))),b.a.createElement(f.a,{height:600,theme:S,revert:null===O||void 0===O?void 0:O.revert,keywords:null===O||void 0===O?void 0:O.keywords,focusLine:Number(null===O||void 0===O?void 0:O.lineNumber)||void 0,fontSize:(null===O||void 0===O?void 0:O.fontSize)||12,content:o,language:"prolog",startTime:I,endTime:T})),"Loading..."===o&&b.a.createElement("div",null,b.a.createElement("br",null),b.a.createElement(p.a,null)))))}}}]);
//# sourceMappingURL=8.0c5db2e2.chunk.js.map