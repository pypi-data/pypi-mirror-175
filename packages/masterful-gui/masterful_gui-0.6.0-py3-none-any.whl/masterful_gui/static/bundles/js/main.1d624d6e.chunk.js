(this["webpackJsonpmasterful-ai-visualize-frontend"]=this["webpackJsonpmasterful-ai-visualize-frontend"]||[]).push([[0],{121:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(44),i=t.n(l),o=t(31),s=(t(81),t(82),t(83),t(84),t(4)),c=t(19),m=t(13),u=function(e){var a=e.show;return r.a.createElement("div",{className:"preloader relative bg-soft flex-col justify-center items-center ".concat(a?"":"show")},r.a.createElement("span",{className:"flex absolute left-50 h-10 w-10"},r.a.createElement("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),r.a.createElement("span",{className:"relative inline-flex rounded-full h-10 w-10 bg-sky-500"})))},d=t(133),f=t(132),p=t(127),h=t(128),v=t(50),y=t.n(v),g=t(71),E=t.n(g),b=t(72),x=t.n(b),N={path:"/trainingruns"},w={path:"/datasets"},k={path:"/docs"},A=[{name:"Training Runs",href:N.path,image:E.a},{name:"Docs",href:k.path,image:x.a}];function S(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")}function L(e){e.children,"v".concat("0.4.2");var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],i=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(d.a.Root,{show:l,as:n.Fragment},r.a.createElement(f.a,{as:"div",className:"fixed inset-0  flex z-40 md:hidden",onClose:i},r.a.createElement(d.a.Child,{as:n.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0"},r.a.createElement(f.a.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})),r.a.createElement(d.a.Child,{as:n.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full"},r.a.createElement("div",{className:"relative flex-1 flex flex-col max-w-xs w-full pt-5 bg-dark_gray"},r.a.createElement(d.a.Child,{as:n.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0"},r.a.createElement("div",{className:"absolute top-0 right-0 -mr-12 pt-2"},r.a.createElement("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:function(){return i(!1)}},r.a.createElement("span",{className:"sr-only"},"Close sidebar"),r.a.createElement(p.a,{className:"h-6 w-6 text-white","aria-hidden":"true"})))),r.a.createElement("div",{className:"flex-shrink-0 flex items-center px-4 "},r.a.createElement("img",{className:"h-12 w-auto",src:y.a,alt:"Workflow"})),r.a.createElement("div",{className:"mt-5 flex-1 h-0 overflow-y-auto"},r.a.createElement("nav",{className:"px-2 space-y-1"},A.map((function(e,a){return r.a.createElement(o.b,{key:"mobile_sideBar_".concat(a),to:e.href,activeClassName:"bg-gray-900 text-white",className:"group flex px-3 py-2 text-gray-300 hover:bg-footer_gray hover:text-white  font-normal  rounded-lg"},r.a.createElement("img",{src:e.image,className:S("mr-3 flex-shrink-0 h-6 w-6 group-hover:text-light_gray "),"aria-hidden":"true"}),e.name)})))))),r.a.createElement("div",{className:"flex-shrink-0 w-14"}))),r.a.createElement("div",{className:"hidden md:flex md:w-72 md:flex-col md:fixed md:inset-y-0"},r.a.createElement("div",{className:"flex-1 flex flex-col min-h-0 bg-dark_gray"},r.a.createElement("div",{className:"flex items-center h-16 flex-shrink-0 px-4 pt-2 "},r.a.createElement("img",{className:"h-16 w-auto",src:y.a,alt:"Workflow"})),r.a.createElement("div",{className:"flex-1 flex flex-col overflow-y-auto"},r.a.createElement("nav",{className:"flex-1 px-2 py-4 space-y-1"},A.map((function(e,a){return r.a.createElement(o.b,{key:"Desktop_sideBar_".concat(a),to:e.href,activeClassName:"bg-gray-900 text-white",className:"group flex text-gray-300 hover:bg-footer_gray hover:text-white px-3 py-2  font-normal  rounded-lg"},r.a.createElement("img",{src:e.image,className:S("mr-3 flex-shrink-0 h-6 w-6 group-hover:text-light_gray "),"aria-hidden":"true"}),e.name)})))))),r.a.createElement("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-200"},r.a.createElement("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none",onClick:function(){return i(!0)}},r.a.createElement("span",{className:"sr-only"},"Open sidebar"),r.a.createElement(h.a,{className:"h-6 w-6","aria-hidden":"true"})))))}var T=t(35),M=t(36),O=t(38),C=t(37),j=t(129),F=t(130),I=t(39),R=t.n(I),B=t(74),P=function(e){var a=e.className,t=e.children;return r.a.createElement("div",{className:"border-b py-3 px-4 bg-gray-50 border-gray-400 ".concat(a)},t)},D=function(e){var a=e.className,t=e.children;return r.a.createElement("div",{className:"py-2 px-4 ".concat(a)},t)};var V=function(e){var a=e.className,t=e.children;return r.a.createElement("div",{className:"bg-white pb-3 overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg ".concat(a)},t)},W=t(5),U=t(29),H=t.n(U),Y="LAYER",z=function(e,a){var t,n=-1,r=Object(W.a)(e.val_metrics);try{for(r.s();!(t=r.n()).done;){var l=t.value;if(H.a.isEqual(l.node_scalar_map,a)){n=l.metrics.loss;break}}}catch(i){r.e(i)}finally{r.f()}return-1===n&&console.log("No val_loss found for scalar: ".concat(a," in task: ").concat(e.title)),n},K=function(e,a){return e<=0?(console.log("Error: total cannot be <= 0"),-1):100*a/e},Q=function(e){if(!e.fit_was_captured)return!1;var a=e.node_search_tasks.length,t=e.node_search_tasks[a-1];return"UNLABELED_DATA_SSL"===t.type&&0!==t.node_optimal_scalar_map.masterful_unlabeled_switch},G=function(e){var a=e.node_optimal_scalar_map;return Object.values(a).some((function(e){return e>0}))},J=function(e){for(var a=[],t=Object.keys(e.node_scalars_map),n=e.node_scalars_map[t[0]].scalars.length,r=0;r<n;r++){var l,i={},o=Object(W.a)(t);try{for(o.s();!(l=o.n()).done;){var s=l.value;i[s]=e.node_scalars_map[s].scalars[r]}}catch(c){o.e(c)}finally{o.f()}a.push(i)}return a},q=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];if(e.type===Y){var r,l=Object(W.a)(e.searched_layers);try{for(l.s();!(r=l.n()).done;){var i=r.value;n=n.concat(X(i,a[i.name],t))}}catch(o){l.e(o)}finally{l.f()}}else n.push(a[e.title]);return n},X=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("MASTERFUL_SAMPLE_MAG_BY_QUANTILE_LAYER"!==e.layer_type)return[a];if(0===a){if(t)return[0];var n=new Array(e.ordered_actions.length).fill(0);return n}for(var r=[],l=a-1,i=0;i<e.ordered_actions.length;i++){var o=e.max_index_grid[i].values[l],s=o-1,c=e.action_mag_grid[i].values[s];r.push(c)}if(t&&r.length>0){var m=0;r.forEach((function(e){return m+=e}));var u=m/r.length;return[Math.floor(100*u)/100]}return r},Z=t(54),$=t(75),ee={xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-4 py-2 text-base",xl:"px-6 py-3 text-base"};function ae(e){var a=e.isDisabled,t=void 0!==a&&a,n=e.isLoading,l=void 0!==n&&n,i=e.type,o=void 0===i?"button":i,s=e.size,c=void 0===s?"sm":s,m=e.color,u=void 0===m?"primary":m,d=e.className,f=void 0===d?"":d,p=e.Icon,h=e.onClick,v=e.children;return r.a.createElement("button",{type:o,onClick:h,disabled:t||l,className:"\n        inline-flex items-center justify-center \n        bg-".concat(u,"-600 \n        hover:bg-").concat(u,"-700 \n        disabled:bg-gray-400 \n        font-medium rounded-md text-white \n        border border-transparent shadow-sm \n        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-").concat(u,"-500\n        ").concat(ee[c]," \n        ").concat(t||l&&"cursor-not-allowed"," \n        ").concat(f,"\n      ")},l&&r.a.createElement(Z.a,{className:"mr-2",size:"md"===c?null:c,spin:!0,icon:$.a}),p&&!l&&r.a.createElement(p,{className:"-ml-0.5 mr-2 h-4 w-4","aria-hidden":"true"}),v)}function te(e){var a=e.keyPrefix,t=e.headers,n=e.hasActions,l=void 0!==n&&n;return r.a.createElement("thead",{className:"bg-gray-50"},r.a.createElement("tr",null,t.map((function(e,t){return r.a.createElement("th",{key:"".concat(a,"_head_").concat(t),scope:"col",className:"px-3 py-3.5 text-left text-base font-semibold text-gray-900"},e)})),l&&r.a.createElement("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6"},r.a.createElement("span",{className:"sr-only"},"Edit"))))}Z.a;var ne=function(e){var a=e.title,t=e.description,l=e.headers,i=e.keyPrefix,o=e.data,c=e.buttonLabel,m=e.rowMapper,u=e.handleClick,d=e.highlight,f=void 0!==d&&d,p=Object(n.useState)(null),h=Object(s.a)(p,2),v=h[0],y=h[1];return r.a.createElement("div",{className:"px-4 sm:px-6 lg:px-8"},a||t||c&&r.a.createElement("div",{className:"sm:flex sm:items-center"},r.a.createElement("div",{className:"sm:flex-auto"},a&&r.a.createElement("h1",{className:"text-xl font-semibold text-gray-900"},a),t&&r.a.createElement("p",{className:"mt-2 text-sm text-gray-700"},t)),c&&r.a.createElement("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},r.a.createElement(ae,{type:"button",size:"sm"},c))),r.a.createElement("div",{className:"mt-2 flex flex-col"},r.a.createElement("div",{className:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},r.a.createElement("div",{className:"inline-block min-w-full align-middle"},r.a.createElement("div",{className:"overflow-hidden ring-1 ring-black ring-opacity-5 md:rounded-lg"},r.a.createElement("table",{className:"min-w-full divide-y divide-gray-300"},r.a.createElement(te,{keyPrefix:i,headers:l}),r.a.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},o.map((function(e,a){return!0===f?r.a.createElement("tr",{key:"table_row_".concat(a),className:"".concat(v===a?"bg-gray-400":""," hover:bg-gray-200"),onClick:function(){y(a)}},m({item:e,i:a,setActive:y,handleClick:u})):m({item:e,i:a})})))))))))},re=function(e){var a=e.policies,t=e.onTableRowClick;"object"!==typeof a&&(a=[]);return r.a.createElement(V,{border:"light",className:"shadow-sm"},r.a.createElement(P,null,r.a.createElement(j.a,{className:"align-items-center"},r.a.createElement(F.a,null,r.a.createElement("h5",{className:"fw-bold fs-4"},"Training Runs"),r.a.createElement("p",null,"Select a training run to visualize")))),r.a.createElement(ne,{headers:["NAME","ML TASK","PARAMS ENGINE"],highlight:!0,rowMapper:function(e){var a=e.item,t=(e.i,e.handleClick),n=a.policy_name,l=a.engine_version,i=a.task_type;return r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{scope:"row",className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm  sm:pl-6",onClick:function(){t(n)}}," ",n),r.a.createElement("td",{className:"whitespace-nowrap px-3 py-4 text-sm "},function(e){if("COMPUTER_VISION_TASK_UNKNOWN"===e)return"Unknown";for(var a=e.toLowerCase().split("_"),t=0;t<a.length;t++)a[t]=a[t][0].toString().toUpperCase()+a[t].substring(1);return a.join(" ")}(i)),r.a.createElement("td",{className:"whitespace-nowrap px-3 py-4 text-sm "},l))},data:a,handleClick:t}))},le=function(e){var a=e.datasets,t=e.onTableRowClick;"object"!==typeof a&&(a=[]);return r.a.createElement(V,{border:"light",className:"shadow-sm"},r.a.createElement(P,null,r.a.createElement(j.a,{className:"align-items-center"},r.a.createElement(F.a,null,r.a.createElement("h5",{className:"fw-bold fs-4"},"Datasets"),r.a.createElement("p",null,"Select a dataset to visualize")))),r.a.createElement(ne,{headers:["Dataset","Cardinality","Train / Test Split","Task"],highlight:!0,rowMapper:function(e){var a=e.item,t=(e.i,e.handleClick),n=(a.dataset_id,a.title),l=a.task;a.cardinality,a.analysis_duration_mins;return""===n&&(Object(B.a)("title"),n="untitled"),r.a.createElement(r.a.Fragment,null,r.a.createElement("th",{scope:"row",className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm  sm:pl-6",onClick:function(){t(n)}}," ",n),r.a.createElement("td",{className:"whitespace-nowrap px-3 py-4 text-sm "},total_cardinality),r.a.createElement("td",{className:"whitespace-nowrap px-3 py-4 text-sm "},train_cardinality," / ",test_cardinality),r.a.createElement("td",{className:"whitespace-nowrap px-3 py-4 text-sm "},l))},data:a,handleClick:t}))},ie="http://127.0.0.1:7007/",oe={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*"},se=["CLASSIFICATION","BINARY_CLASSIFICATION"],ce=function(e){Object(O.a)(t,e);var a=Object(C.a)(t);function t(e){var n;return Object(T.a)(this,t),(n=a.call(this,e)).state={selectedDatasetIndex:null,datasets:[],intervalId:null},n}return Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.sync_();var a=setInterval((function(){e.sync_()}),6e5);this.setState({intervalId:a})}},{key:"componentWillUnmount",value:function(){null!==this.state.intervalId&&(clearInterval(this.state.intervalId),this.setState({intervalId:null}))}},{key:"sync_",value:function(){var e=this;R.a.get(String(ie+"scan/"),{headers:oe}).then((function(e){return R.a.get(String(ie+"api/dataset/"),{headers:oe})})).then((function(a){if(a.data.length>0){var t=a.data.slice();e.setState({datasets:t})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,a=function(a){var t=e.state.datasets.findIndex((function(e){return e.title===a}));e.setState({selectedDatasetIndex:t})};return this.state.selectedDatasetIndex,r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"justify-content-md-center"},r.a.createElement(F.a,{xs:12,className:"mb-4"},r.a.createElement(le,{datasets:this.state.datasets,onTableRowClick:a}))))}}]),t}(r.a.Component),me=t(27),ue=t(131);function de(e){var a=e.title,t=e.children,l=e.open,i=e.setOpen;return r.a.createElement(d.a.Root,{show:l,as:n.Fragment},r.a.createElement(f.a,{as:"div",className:"relative flex items-center  z-10 ",onClose:i},r.a.createElement(d.a.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},r.a.createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 opacity-50 transition-opacity"})),r.a.createElement("div",{className:"fixed z-10 inset-0 overflow-y-auto"},r.a.createElement("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:flex sm:p-0"},r.a.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200b"),r.a.createElement(d.a.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},r.a.createElement(f.a.Panel,{className:"relative inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6"},r.a.createElement("div",null,r.a.createElement("div",{className:"mt-3 text-center sm:mt-5"},r.a.createElement(f.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900"},a),r.a.createElement("div",{className:"mt-2"},t))),r.a.createElement("div",{className:"mt-5 sm:mt-6"},r.a.createElement(ae,{type:"button",className:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm ",size:"lg",onClick:function(){return i(!1)}},"Close"))))))))}var fe=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],i=t[1],o=e.title,c=e.policyName,m=e.policyEngine,u=e.data,d=(e.min,e.max,u.map((function(e,a){var t=e.Basline,n=e.classLabel;return{toolTip:n,name:"Basline",value:t,groupId:n,label:{show:!0,color:"white",position:"inside"}}}))),f=u.map((function(e,a){var t=e.Masterful,n=e.classLabel;return{toolTip:n,name:"Masterful",value:t,groupId:n,label:{show:!0,color:"white",position:"inside"}}})),p={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},valueFormatter:function(e){return"".concat(e,"%")}},dataZoom:[{orient:"horizontal",height:20}],grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},legend:{show:!0,textStyle:{fontSize:11,color:"#333333"},itemWidth:17},xAxis:[{type:"category",name:"Class Label",nameLocation:"middle",axisTick:{alignWithLabel:!0},position:"bottom",nameTextStyle:{fontWeight:"bold",lineHeight:36},data:u.map((function(e){return e.classLabel}))}],yAxis:[{type:"value",name:"Recall",nameLocation:"middle",max:function(e){return e.max.toFixed(2)},position:"bottom",nameTextStyle:{fontWeight:"bold",lineHeight:36}}],series:[{name:"Baseline",type:"bar",itemStyle:{color:"#9F9F9F",borderRadius:4},barGap:0,data:d},{name:"Masterful",type:"bar",itemStyle:{color:"#E97551",borderRadius:4},barGap:0,data:f}]};return r.a.createElement(V,{className:"shadow-sm"},r.a.createElement(P,{className:"flex-row align-items-center flex-0"},r.a.createElement("div",{className:"d-block"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h3",{className:"fw-bold fs-4 mb-2"},o),r.a.createElement(ue.a,{className:"h-8 w-8 cursor-pointer p-2 rounded bg-gray-500 text-black",onClick:function(){i(!0)}})),r.a.createElement("div",null,r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Name: "),c),r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Version: "),m)))),r.a.createElement(D,{className:"p-2",style:{minHeight:600,height:650,minWidth:400}},r.a.createElement(me.a,{option:p,style:{minHeight:600,height:650,minWidth:400}})),r.a.createElement(de,{title:o,open:l,setOpen:i},r.a.createElement("p",{className:"text-sm text-black"},"Recall is defined as TP / P, or equivalently, TP / (TP + FN). The term Recall has the same meaning as True Positive Rate and sensitivity.")))},pe=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],i=t[1],o=e.title,c=e.policyName,m=e.policyEngine,u=e.data,d=(e.keys,e.maxVal,function(e){return"Basline"===e?"#9F9F9F":"Masterful"===e?"#E97551":"#BDBDBD"}),f=[],p=[];u.map((function(e,a){var t=e.technique,n=e.lowerPart,r=(e.upperPart,e.impValue);f.push({name:t,value:n,itemStyle:{color:"transparent"}}),p.push({name:t,value:r,itemStyle:{color:d(t)}})}));var h=[{name:"Lower Value",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:f},{name:"Imp Value",type:"bar",stack:"Total",itemStyle:{borderRadius:8},label:{show:!0,color:"white",position:"inside",formatter:function(e){var a=e.data,t=e.value;return"Masterful"===a.name||"Basline"===a.name?t:"-".concat(t)}},data:p}],v={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},textStyle:{fontWeight:"bold"},formatter:function(e){var a=e[1],t=a.data,n=a.value;return"Masterful"===t.name||"Basline"===t.name?" ".concat(t.name,' : <span style="font-weight: normal;"> ').concat(n," </span>"):" ".concat(t.name,' : <span style="font-weight: normal;"> -').concat(n," </span> ")}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",name:"Technique",nameLocation:"middle",position:"bottom",axisLabel:{interval:0},axisTick:{alignWithLabel:!0},nameTextStyle:{fontWeight:"bold",lineHeight:36,overflow:"truncate"},data:u.map((function(e){return e.technique}))},yAxis:{type:"value",name:"Val loss",nameLocation:"middle",max:function(e){return e.max.toFixed(2)},position:"bottom",nameTextStyle:{fontWeight:"bold",lineHeight:36}},series:h};return r.a.createElement(V,{className:"shadow-sm"},r.a.createElement(P,{className:"flex-row align-items-center flex-0"},r.a.createElement("div",{className:"d-block "},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h3",{className:"fw-bold fs-4 mb-2"},o),r.a.createElement(ue.a,{className:"h-8 w-8 cursor-pointer p-2 rounded bg-gray-500 text-black",onClick:function(){i(!0)}})),r.a.createElement("div",null,r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Name: "),c),r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Version: "),m)))),r.a.createElement(D,{className:"p-2",style:{minHeight:600,height:620,minWidth:420}},r.a.createElement(me.a,{option:v,style:{minHeight:600,height:600,minWidth:400}})),r.a.createElement(de,{title:o,open:l,setOpen:i},r.a.createElement("p",{className:"text-sm text-black"},"Calculated on the validation set.")))},he=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],i=t[1],o=e.policyName,c=e.policyEngine,m=e.data,u=e.reductionRate,d=function(e){return"Basline"===e?"#9F9F9F":"#E97551"},f=function(e){return"".concat(e,"%")},p=m.map((function(e,a){var t=e["Error Rate"],n=e.Model;return{name:n,value:t,label:{show:!0,position:"inside",color:"white",formatter:f(t)},itemStyle:{color:d(n),borderRadius:8},groupId:n}})),h={legend:{},xAxis:{name:"Model",nameLocation:"middle",position:"bottom",axisTick:{alignWithLabel:!0},nameTextStyle:{fontWeight:"bold",lineHeight:36},data:m.map((function(e){return e.Model}))},yAxis:{type:"value",name:"Error Rate",nameLocation:"middle",position:"bottom",max:function(e){return e.max.toFixed(2)},nameTextStyle:{fontWeight:"bold",lineHeight:36}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{color:"white"}},formatter:function(e){return"Error Rate - ".concat(e[0].name,": ").concat(e[0].value,"%")}},series:{type:"bar",data:p}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{className:"shadow-sm"},r.a.createElement(P,{className:"flex-row align-items-center flex-0"},r.a.createElement("div",{className:"d-block"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h3",{className:"fw-bold fs-4 mb-2"},"Model Improvement on Error Rate"),r.a.createElement(ue.a,{className:"h-8 w-8 cursor-pointer p-2 rounded bg-gray-500 text-black",onClick:function(){i(!0)}})),r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"flex-1 flex-col"},r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Name: "),o),r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Version: "),c)),r.a.createElement("div",{className:"flex-1"},r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Reduction rate: "),u,"%"))))),r.a.createElement(D,{className:"p-2",style:{minHeight:600,height:600,minWidth:400}},r.a.createElement(me.a,{option:h,style:{minHeight:600,height:600,minWidth:400}})),r.a.createElement(de,{title:"Model Improvement on Error Rate",open:l,setOpen:i},r.a.createElement("p",{className:"text-sm text-black"},"Error is defined as (FP + FN) / (TP + TN + FP + FN), or equivalently 100% - accuracy. Calculated on the validation set."))))},ve=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],i=t[1],o=e.title,c=e.policyName,m=e.policyEngine,u=e.data,d=(e.min,e.max,u.map((function(e,a){var t=e.Basline,n=e.classLabel;return{toolTip:n,name:"Baseline",value:t,groupId:n,label:{show:!0,color:"white",position:"inside"}}}))),f=u.map((function(e,a){var t=e.Masterful,n=e.classLabel;return{toolTip:n,name:"Masterful",value:t,groupId:n,label:{show:!0,color:"white",position:"inside"}}})),p={tooltip:{trigger:"axis",axisPointer:{type:"cross"},valueFormatter:function(e){return"".concat(e,"%")}},dataZoom:[{orient:"horizontal",height:20}],grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},legend:{show:!0,textStyle:{fontSize:11,color:"#333333"},itemWidth:17},xAxis:[{type:"category",name:"Class Prediction",nameLocation:"middle",position:"bottom",axisTick:{alignWithLabel:!0},nameTextStyle:{fontWeight:"bold",lineHeight:36},data:u.map((function(e){return e.classLabel}))}],yAxis:[{type:"value",name:"Precision",nameLocation:"middle",max:function(e){return e.max.toFixed(2)},position:"bottom",nameTextStyle:{fontWeight:"bold",lineHeight:36}}],series:[{name:"Baseline",type:"bar",itemStyle:{color:"#9F9F9F",borderRadius:4},barGap:0,data:d},{name:"Masterful",type:"bar",itemStyle:{color:"#E97551",borderRadius:4},barGap:0,data:f}]};return r.a.createElement(V,{className:"shadow-sm"},r.a.createElement(P,{className:"flex-row align-items-center flex-0"},r.a.createElement("div",{className:"d-block"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h3",{className:"fw-bold fs-4 mb-2"},o),r.a.createElement(ue.a,{className:"h-8 w-8 cursor-pointer p-2 rounded bg-gray-500 text-black",onClick:function(){i(!0)}})),r.a.createElement("div",null,r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Name: "),c),r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Version: "),m)))),r.a.createElement(D,{className:"p-2",style:{minHeight:600,height:650,minWidth:400}},r.a.createElement(me.a,{option:p,style:{minHeight:600,height:650,minWidth:400}})),r.a.createElement(de,{title:o,open:l,setOpen:i},r.a.createElement("p",{className:"text-sm text-black"},"Precision is defined as TP / PP, where PP means Predicted Positives. Or equivalently, TP / (TP + FP). The term Precision has the same meaning as Positive Predictive Value.")))},ye=function(e){console.log({props:e});var a=e.title,t=e.policyName,n=e.policyEngine,l=e.plotData,i=e.plotVariables,o=i.map((function(e){return e.actionKey})),s=l.map((function(e,a){var t=[];return o.map((function(a){t.push(e[a])})),{lineStyle:{color:a===l.length-1?"#00e676":"#D32F2F"},value:t}})),c={parallelAxis:i.map((function(e,a){return"selected"===e.actionKey||"masterful_unlabeled_switch"===e.actionKey?{dim:a,name:e.actionLegend,nameLocation:"middle",nameTextStyle:{fontWeight:"bold",lineHeight:36},type:"category",data:e.values}:{dim:a,name:e.actionLegend,nameLocation:"middle",nameTextStyle:{fontWeight:"bold",lineHeight:36},min:function(e){return e.min.toFixed(2)},max:function(e){return e.max.toFixed(2)}}})),parallel:{layout:"vertical"},grid:{left:"10%",right:"10%",bottom:"3%",containLabel:!0},series:{type:"parallel",lineStyle:{width:4},data:s}};return r.a.createElement(V,{className:"shadow-sm"},r.a.createElement(P,{className:"flex-row align-items-center flex-0"},r.a.createElement("div",{className:"d-block"},r.a.createElement("h3",{className:"fw-bold fs-4 mb-2"},a),r.a.createElement("div",null,r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Name: "),t),r.a.createElement("h6",{className:"card-metadata-text"},r.a.createElement("b",null,"Version: "),n)))),r.a.createElement(D,{className:"p-2",style:{minHeight:800,height:1e3,minWidth:400}},r.a.createElement(me.a,{option:c,style:{minHeight:800,height:1e3,minWidth:400}})))},ge=function(e,a,t){var n=[],r={upperPart:0,lowerPart:0,technique:"Basline"};r.impValue=Math.floor(1e5*e)/1e5,n.push(r);for(var l=0,i=0,o=Object.keys(t);i<o.length;i++){var s=o[i],c=Math.floor(1e5*t[s])/1e5;if(0!==c){var m={};m.upperPart=l,m.technique=s,m.impValue=c,m.lowerPart=e-l-m.impValue,n.push(m),l+=m.impValue}}var u=e-a,d={};return d.upperPart=Math.floor(1e5*u)/1e5,d.lowerPart=0,d.technique="Masterful",d.impValue=Math.floor(1e5*a)/1e5,n.push(d),n},Ee=function(e){return z(e,e.node_optimal_scalar_map)},be=function(e){return e.presearch_model_val_metrics.loss},xe=function(e,a){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var l=r[n];t[l]=e[l]*a/100}return t},_e=function(e,a,t){var n,r={},l=a,i=Object(W.a)(e.node_search_tasks);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!o.title.includes("unlabeled")){var s=Ae(o);if(G(o)){var c=Ne(o,l,t);r[s]=c;var m=z(o,o.node_optimal_scalar_map);if(-1===m)return console.log("Error: did not expect node optimal val loss to be missing."),null;l=m}else r[s]=0}}}catch(u){i.e(u)}finally{i.f()}return r},Ne=function(e,a,t){var n=z(e,e.node_optimal_scalar_map);if(-1===n)return-1;var r=a-n;if(r<0)return console.log("Optimal node val loss cannot be worse than previous optimal val loss."),-1;var l=K(t,r);return-1===l?-1:l},we=function(e){if(0===e.node_search_tasks.length)return-1;var a=function(e){var a=e.node_search_tasks.length;if(0===a)return console.log("RAY | killing analyze final loss here #1"),null;var t=a-1;e.fit_was_captured&&("UNLABELED_DATA_SSL"!==e.node_search_tasks[a-1].type?console.log("Warning: Detected a policy with fit captured and SSL node missing."):t=a-2);for(var n=t;n>=0;n--){var r=e.node_search_tasks[n];if(G(r))return r}return null}(e);return null===a?-1:z(a,a.node_optimal_scalar_map)},ke=function(e){return e.fit_was_captured?e.learned_policy_val_metrics.loss:(console.log("Cannot get Masterful teacher val loss, fit was not captured."),-1)},Ae=function(e){var a="",t=e.type;if("SYNTHETIC_DATA_BLENDING"===t)a="Synthetic Data";else if("UNLABELED_DATA_SSL"===t)a="SSL";else if(t===Y){if("MASTERFUL_SAMPLE_MAG_BY_QUANTILE_LAYER"===e.searched_layers[0].layer_type){var n,r=[],l=Object(W.a)(e.searched_layers);try{for(l.s();!(n=l.n()).done;){var i=n.value.name;if(-1!==i.indexOf("masterful")){var o=i.split("_").slice(1).join(" ");r.push(o)}else r.push(i)}}catch(c){l.e(c)}finally{l.f()}var s=r.join(" & ");a=s.length<=25?s:s.slice(0,25)}else a=e.searched_layers[0].ordered_actions[0]}else a=e.title;return a.toLowerCase()},Se=function(e){var a=e.learned_policy_val_metrics.label_recall_map;if(Q(e)){var t=e.node_search_tasks.length,n=e.node_search_tasks[t-1];if("UNLABELED_DATA_SSL"!==n.type)console.log("Expected last node to be SSL, instead got: ",n.type),console.log("Will use Masterful teacher fit training result instead.");else{var r,l=Object(W.a)(n.val_metrics);try{for(l.s();!(r=l.n()).done;){var i=r.value;if(H.a.isEqual(i.node_scalar_map,n.node_optimal_scalar_map)){a=i.metrics.label_recall_map;break}}}catch(o){l.e(o)}finally{l.f()}}}return a},Le=function(e){var a=e.learned_policy_val_metrics.label_precision_map;if(Q(e)){var t=e.node_search_tasks.length,n=e.node_search_tasks[t-1];if("UNLABELED_DATA_SSL"!==n.type)console.log("Expected last node to be SSL, instead got: ",n.type),console.log("Will use Masterful teacher fit training result instead.");else{var r,l=Object(W.a)(n.val_metrics);try{for(l.s();!(r=l.n()).done;){var i=r.value;if(H.a.isEqual(i.node_scalar_map,n.node_optimal_scalar_map)){a=i.metrics.label_precision_map;break}}}catch(o){l.e(o)}finally{l.f()}}}return a},Te=function(e){var a={errPlotData:null,errReductionRate:null},t=Me(e.presearch_model_val_metrics.confusion_matrix);if(-1===t)return console.error("Cannot create error rate plot: baseline confusion matrix missing."),a;var n=0;if(Q(e)){var r=e.node_search_tasks.length,l=e.node_search_tasks[r-1],i=function(e,a){var t,n=null,r=Object(W.a)(e.val_metrics);try{for(r.s();!(t=r.n()).done;){var l=t.value;if(H.a.isEqual(l.node_scalar_map,a)){n=l.metrics.confusion_matrix;break}}}catch(i){r.e(i)}finally{r.f()}return null==n&&console.log("No confusion matrix found for scalar: ".concat(a," in task: ").concat(e.title)),n}(l,l.node_optimal_scalar_map);n=Me(i)}else n=Me(e.learned_policy_val_metrics.confusion_matrix);if(-1===n)return console.error("Failed calculating error rate, final error rate unavailable."),a;var o=K(t,t-n);o=Math.floor(100*o)/100;var s=[],c={Model:"Basline"};c["Error Rate"]=Math.floor(100*t)/100,s.push(c);var m={Model:"Masterful"};return m["Error Rate"]=Math.floor(100*n)/100,s.push(m),{errPlotData:s,errReductionRate:o}},Me=function(e){var a=Oe(e);if(-1===a)return console.log("Failed computing error rate."),-1;for(var t=Object.keys(e).length,n=0,r=0;r<t;r++){var l=0;e[r].values.forEach((function(e){return l+=e})),n+=l}return 0===n?(console.log("Failed computing error rate, totalSum is 0 for: ",e),-1):100*(1-a/n)},Oe=function(e){if(void 0==e)return console.log("Failed computing true positives, no confusion matrix."),-1;for(var a=0,t=Object.keys(e).length,n=0;n<t;n++){if(void 0==e[n])return console.log("Invalid confusion matrix, no data for class: ",n," in: ",e),-1;a+=e[n].values[n]}return a},Ce=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r="",l="";if(l=n&&-1!==e.toLowerCase().indexOf("masterful")?e.split("_").slice(1).join(" "):e,a===Y)r="MASTERFUL_REPLACEMENT_RATE_LAYER"===t?"(rr)":"(m)";else{if("SYNTHETIC_DATA_BLENDING"!==a)return"UNLABELED_DATA_SSL"===a?"SSL":l;r="(r)"}return String(l.toLowerCase()+" "+r)},je=function(e){var a=[],t=e.presearch_model_val_metrics.loss;a.push(t);var n,r=Object(W.a)(e.node_search_tasks);try{for(r.s();!(n=r.n()).done;){var l,i=n.value,o=J(i),s=Object(W.a)(o);try{for(s.s();!(l=s.n()).done;){var c=l.value,m=z(i,c);-1!==m&&a.push(m)}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}return a.sort(),{minValLoss:a[0],maxValLoss:a[a.length-1]}},Fe=function(e,a){var t=e;if(a.includes(t))for(var n=1;a.includes(t);)t=String(e+"_"+n),n++;return t},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=0,n=1;return a===Y&&("MASTERFUL_SAMPLE_MAG_BY_QUANTILE_LAYER"!==e&&"MASTERFUL_FIXED_MAG_LAYER"!==e||(n=100)),{min:t,max:n}},Re=function(e){var a,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.presearch_model_val_metrics.loss,r=[],l=Object(W.a)(e.node_search_tasks);try{for(l.s();!(a=l.n()).done;){var i=a.value;r=r.concat(q(i,i.node_optimal_scalar_map,t))}}catch(c){l.e(c)}finally{l.f()}var o=e.node_search_tasks.length-1,s=z(e.node_search_tasks[o],e.node_search_tasks[o].node_optimal_scalar_map);if(-1===s)for(;-1===s;){if(-1===(o-=1)){s=n;break}s=z(e.node_search_tasks[o],e.node_search_tasks[o].node_optimal_scalar_map)}return r.push(s),r.push("SELECTED"),r},Be=function(e,a){if(e.length!==a.length)return console.log("Number of action keys (".concat(e.length,") and values (").concat(a.length,") should be identical.")),[];for(var t=[],n=0;n<e.length;n++){var r=e[n],l=a[n];t[r]="masterful_unlabeled_switch"===r?Pe(l):l}return t},Pe=function(e){return 0===e?"OFF":"ON"},De=function(e){return e.filter((function(e){return!0===e.fit_was_captured}))},Ve=function(e){return null!==e&&se.includes(e.task_type)},We=function(e){Object(O.a)(t,e);var a=Object(C.a)(t);function t(e){var n;return Object(T.a)(this,t),(n=a.call(this,e)).state={selectedPolicyIndex:null,policySearchTasks:[],intervalId:null},n}return Object(M.a)(t,[{key:"sync_",value:function(){var e=this;R.a.get(String(ie+"scan/"),{headers:oe}).then((function(e){return R.a.get(String(ie+"api/search/"),{headers:oe})})).then((function(a){var t;if(a.data.length>0){var n=a.data.slice();e.setState({policySearchTasks:(t=De(n),t.filter((function(e){return Ve(e)})))})}})).catch((function(e){return console.log(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.sync_();var a=setInterval((function(){e.sync_()}),6e5);this.setState({intervalId:a})}},{key:"componentWillUnmount",value:function(){null!==this.state.intervalId&&(clearInterval(this.state.intervalId),this.setState({intervalId:null}))}},{key:"render",value:function(){var e=this,a={policyName:"",policyEngine:"",taskType:"",plotVariables:[],actionKeys:[],recallByClassData:[],precisionByClassData:[],waterfallChartKeys:[],waterfallChartData:[],waterfallChartMaxVal:1,recallMin:0,recallMax:100,precisionMin:0,precisionMax:100,errorRateReductionValue:0,errorRateReductionData:[]},t=[];if(0!==this.state.policySearchTasks.length&&null!==this.state.selectedPolicyIndex){var n=this.state.selectedPolicyIndex,l=this.state.policySearchTasks[n];a.taskType=l.task_type;var i=function(e,a){var t,n=[],r=[],l=Object(W.a)(e.node_search_tasks);try{for(l.s();!(t=l.n()).done;){var i=t.value,o=i.type;if(o===Y){var s=i.searched_layers[0].layer_type;if(a&&"MASTERFUL_SAMPLE_MAG_BY_QUANTILE_LAYER"===s){var c,m=Object(W.a)(i.searched_layers);try{for(m.s();!(c=m.n()).done;){var u=c.value,d=u.name;r.push(d);var f=Ie(s,o),p=f.min,h=f.max;n.push({actionKey:d,actionLegend:Ce(d.toUpperCase(),o,u.layer_type),min:p,max:h})}}catch(j){m.e(j)}finally{m.f()}}else{var v,y=Object(W.a)(i.searched_layers);try{for(y.s();!(v=y.n()).done;)for(var g=v.value,E=g.ordered_actions.length,b=0;b<E;b++){var x=g.ordered_actions[b],_=Fe(x,r);r.push(_);var N=Ie(s,o),w=N.min,k=N.max;n.push({actionKey:_,actionLegend:Ce(x,o,s),min:w,max:k})}}catch(j){y.e(j)}finally{y.f()}}}else{var A=Fe(i.title,r);if(r.push(A),"UNLABELED_DATA_SSL"===o)n.push({actionKey:A,actionLegend:Ce(i.title,o),values:["ON","OFF"]});else{var S=Ie("",o),L=S.min,T=S.max;n.push({actionKey:A,actionLegend:Ce(i.title,o),min:L,max:T})}}}}catch(j){l.e(j)}finally{l.f()}var M=je(e),O=M.minValLoss,C=M.maxValLoss;return n.push({actionKey:"val_loss",actionLegend:"val_loss",min:O-.05,max:C+.05}),n.push({actionKey:"selected",actionLegend:"Optimal Params",values:["SELECTED","NOT SELECTED"]}),r.push("val_loss"),r.push("selected"),{currentPlotVariables:n,actionKeysSoFar:r}}(l,!0),o=i.actionKeysSoFar,s=i.currentPlotVariables;a.policyName=l.policy_name,a.policyEngine=l.engine_version,a.plotVariables=s,a.actionKeys=o,a.waterfallChartKeys=["lowerPart","impValue","upperPart"],a.waterfallChartData=function(e){var a=be(e),t=we(e),n=_e(e,a,a-t),r=ke(e),l=r,i=xe(n,a-r);if(Q(e)){var o=e.node_search_tasks.length,s=e.node_search_tasks[o-1],c=Ee(s);i[Ae(s)]=r-c,l=c}return ge(a,l,i)}(l),a.waterfallChartMaxVal=l.presearch_model_val_metrics.loss,t=(t=function(e,a,t){var n=[],r=Re(e,t);n.push(Be(a,r));var l,i=[],o=Object(W.a)(e.node_search_tasks);try{for(o.s();!(l=o.n()).done;){var s,c=l.value,m=J(c),u=Object(W.a)(m);try{for(u.s();!(s=u.n()).done;){var d=s.value;if(!_.isEqual(d,c.node_optimal_scalar_map)){var f=[];f=f.concat(i);var p=q(c,d,t);f=f.concat(p);var h=a.length-f.length-2;if(h>0){var v=new Array(h).fill(0);f=f.concat(v)}var y=z(c,d);f.push(y),f.push("NOT SELECTED"),n.push(Be(a,f))}}}catch(g){u.e(g)}finally{u.f()}i=i.concat(q(c,c.node_optimal_scalar_map,t))}}catch(g){o.e(g)}finally{o.f()}return n}(l,o,!0)).reverse();var c=function(e){if(!e.fit_was_captured)return console.error("Fit must be captured to comput recall by class data."),[];var a=e.presearch_model_val_metrics.label_recall_map;if(!a)return console.error("Baseline metrics unavailable. Label recall failed."),[];var t=Se(e);if(!t)return console.error("Failed getting final recall map for policy: ",e),[];if(Object.keys(a).length!==Object.keys(t).length)return console.error("BaselineRecallMap & finalRecallMap must same amount : "),[];for(var n=[],r=0;r<Object.keys(a).length;r++){var l={};l.classLabel=r,l.Basline=Math.floor(1e4*a[r])/100,l.Masterful=Math.floor(1e4*t[r])/100,n.push(l)}return n}(l);a.recallByClassData=c;var m=function(e){if(!e.fit_was_captured)return console.error("Fit must be captured to comput precision by class data."),[];var a=e.presearch_model_val_metrics.label_precision_map;if(!a)return console.error("Baseline metrics unavailable. Label precision failed."),[];var t=Le(e);if(!t)return console.error("Failed getting final precision map for policy: ",e),[];if(Object.keys(a).length!==Object.keys(t).length)return console.error("baselinePrecisionMap & finalPrecisionMap must same amount : "),[];for(var n=[],r=0;r<Object.keys(a).length;r++){var l={};l.classLabel=r,l.Basline=Math.floor(1e4*a[r])/100,l.Masterful=Math.floor(1e4*t[r])/100,n.push(l)}return n}(l);a.precisionByClassData=m;var u=function(e){if(null===e||0===e.length)return{recallMin:0,recallMax:100};var a,t=100,n=0,r=Object(W.a)(e);try{for(r.s();!(a=r.n()).done;){var l=a.value;if(0!==l["Baseline Recall"]){l["Baseline Recall"]<t&&(t=l["Baseline Recall"]);var i=0;void 0===l["Worse Recall"]?i+=l["Baseline Recall"]+l["Better Recall"]:i+=l["Actual Baseline Recall"],i>n&&(n=i)}}}catch(o){r.e(o)}finally{r.f()}return{recallMin:t=Math.max(0,t-2),recallMax:n=Math.min(100,n+2)}}(c),d=u.recallMin,f=u.recallMax,p=function(e){if(null===e||0===e.length)return{precisionMin:0,precisionMax:100};var a,t=100,n=0,r=Object(W.a)(e);try{for(r.s();!(a=r.n()).done;){var l=a.value;if(0!==l["Baseline Precision"]){l["Baseline Precision"]<t&&(t=l["Baseline Precision"]);var i=0;void 0===l["Worse Precision"]?i+=l["Baseline Precision"]+l["Better Precision"]:i+=l["Actual Baseline Precision"],i>n&&(n=i)}}}catch(o){r.e(o)}finally{r.f()}return{precisionMin:t=Math.max(0,t-2),precisionMax:n=Math.min(100,n+2)}}(m),h=p.precisionMin,v=p.precisionMax;a.recallMin=Math.min(d,h),a.recallMax=Math.max(f,v),a.precisionMin=Math.min(d,h),a.precisionMax=Math.max(f,v);var y=Te(l),g=y.errPlotData,E=y.errReductionRate;a.errorRateReductionValue=E,a.errorRateReductionData=g}var b=function(a){var t=e.state.policySearchTasks.findIndex((function(e){return e.policy_name===a}));e.setState({selectedPolicyIndex:t})};return null!==this.state.selectedPolicyIndex?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"justify-content-md-center",style:{marginTop:12,marginBottom:12}},r.a.createElement(F.a,null,r.a.createElement(re,{policies:this.state.policySearchTasks,onTableRowClick:b}))),r.a.createElement(j.a,{className:"justify-content-md-center",style:{marginTop:12,marginBottom:12}},r.a.createElement(F.a,null,r.a.createElement(pe,{title:"Model Improvement on Loss",policyName:a.policyName,policyEngine:a.policyEngine,data:a.waterfallChartData,keys:a.waterfallChartKeys,maxVal:a.waterfallChartMaxVal})),r.a.createElement(F.a,null,function(){if(null!=a.errorRateReductionData)return r.a.createElement(he,{policyName:a.policyName,policyEngine:a.policyEngine,data:a.errorRateReductionData,reductionRate:a.errorRateReductionValue})}())),r.a.createElement(j.a,{className:"justify-content-md-center",style:{marginTop:12,marginBottom:12}},r.a.createElement(F.a,null,function(e){if(!("CLASSIFICATION"!==e||a.recallByClassData.length<0))return r.a.createElement(fe,{title:"Model Improvement on Recall",policyName:a.policyName,policyEngine:a.policyEngine,data:a.recallByClassData,min:a.recallMin,max:a.recallMax})}(a.taskType)),r.a.createElement(F.a,null,function(e){if(!("CLASSIFICATION"!==e||a.precisionByClassData.length<0))return r.a.createElement(ve,{title:"Model Improvement on Precision",policyName:a.policyName,policyEngine:a.policyEngine,data:a.precisionByClassData,min:a.precisionMin,max:a.precisionMax})}(a.taskType))),r.a.createElement(j.a,{className:"justify-content-md-center",style:{marginTop:12,marginBottom:12,width:"50.8%",minWidth:800}},r.a.createElement(F.a,null,r.a.createElement(ye,{title:"Regularization Params",policyName:a.policyName,policyEngine:a.policyEngine,plotVariables:a.plotVariables,plotData:t})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(F.a,null,r.a.createElement(re,{policies:this.state.policySearchTasks,onTableRowClick:b}))))}}]),t}(r.a.Component),Ue=function(e){Object(O.a)(t,e);var a=Object(C.a)(t);function t(e){return Object(T.a)(this,t),a.call(this,e)}return Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("iframe",{src:"https://docs.masterfulai.com/0.4.2/index.html",title:"Documentation",width:"100%",height:"2000"}))}}]),t}(r.a.Component),He=function(e){var a=e.component,t=Object(c.a)(e,["component"]),l=Object(n.useState)(!1),i=Object(s.a)(l,2),o=i[0],d=i[1];Object(n.useEffect)((function(){var e=setTimeout((function(){return d(!0)}),1e3);return function(){return clearTimeout(e)}}),[]);var f=Object(n.useState)((function(){return"false"!==localStorage.getItem("settingsVisible")})),p=Object(s.a)(f,2);p[0],p[1];return r.a.createElement(m.b,Object.assign({},t,{render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,{show:!o}),r.a.createElement(L,null),r.a.createElement("main",{className:"content"},r.a.createElement(a,e)))}}))},Ye=function(){return r.a.createElement(m.d,null,r.a.createElement(He,{exact:!0,path:N.path,component:We}),r.a.createElement(He,{exact:!0,path:w.path,component:ce}),r.a.createElement(He,{exact:!0,path:k.path,component:Ue}),r.a.createElement(m.a,{to:N.path}))},ze=function(){var e=Object(m.g)().pathname;return Object(n.useEffect)((function(){window.scrollTo({top:0,left:0,behavior:"auto"})}),[e]),null};i.a.render(r.a.createElement(o.a,null,r.a.createElement(ze,null),r.a.createElement(Ye,null)),document.getElementById("root"))},50:function(e,a,t){e.exports=t.p+"media/masterful_ai_logo.b2d31b9a.svg"},71:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAACtElEQVR4Ae3cO05VURyFcRuNGh/XRxgCI7CixjAYaOkMN9I4BBgFgxBFwXdotLGSgoTQYKCCnwUkFIjnHtzcfyDr68/OyreS89iPcyNUEkIIAVOYSu4isIKV5C4AkzjEISaTe8xg2SnLyT1GMIF9p+xjIrnHBBadZTG5xwDuYsdZdnA3uS8ZzDqf2eS+JHAHc9h2PtuYw53kbvvgWsSO0dnBIiaS+//el5dw4OIcYAmTyd3vM30Fh9pxiBVMJXcKqM+dW1B97i7yEC4ir6FF5EOsnExFZDIuuTMdnQUZPMcq9rCJIW6OIXeWJLHg76xjcIm5syiPoX+zgUHL3NmW0iG/QQkduUOH/I4SmhP59SVEfn0JkV9fQuTXlxD5W1UlRP6JUAyLSoj8BteGJgL7j7GOWzHfQv7Fx3oZ+Qz1Y7rhmD8ivz+7eNYx7gC/dLMX+WhZAgbYMBprkd+whJ7yjzAT+Y1K6CkfFiK/XQnTPeUPI7/7VXMauxoT+d18wKOT655hN/IL5B9zWkLkF8hvVULkd/PxjPyOEprLj/xuMB35dfIH7V8167elRH79xqzIL92aWCD/U738+s25lfIfjzjuQ6y3l1+/PT3yqw9oFMj/XCK/4IhS5Bcc0ov8gmOqkX+dD2oXyH/fXn79rwoiv/pnHQXyv+DJiOM+aCD/+hRQIP9de/n1t6DIr38IR375a2jkF3yIFcj/Wi+//m8plfKf9pC/ViD/6kzGYSHyi6ajMYMjo/HtessvWJDBWnv57lfKv1JLkvitm62e8t9Wy78yi/L4bjTmr6H8+m0peGF05hvLD7iJ1/1LiPxm4B7e9CqhXn5KOL2mSn5K+FkoPyUUyE8JBfJTQr38lFAvPyXUy08J9fJTQr38lLCafy8Ugtt4hU3sYRXPYyYcE0IIIYQQQvgDlYF75V2EaQoAAAAASUVORK5CYII="},72:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAAkUlEQVRYw+3Xyw2AIBAEUPtAa7UatDL0gjWMJy9emJ2Nv7hzZuclBELousgLg4SMBa2Men0FF41ABh+FQAEuJY5JZo1EmAErIQA2QgIshAjwhAywhAPgCBfAEE4A3wBccwH8EGi9OAFcD8QxjXsQQBzTRwDbB+Sc0gYmF5DbQI9Nrq9IzG4OmLGayxdkqj5ye3ZY2irQOtTXPQAAAABJRU5ErkJggg=="},76:function(e,a,t){e.exports=t(121)},81:function(e,a,t){},82:function(e,a,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.1d624d6e.chunk.js.map