[build-system]
requires = ["hatchling>=1.9.0"]
build-backend = "hatchling.build"

[project]
name = "jpterm"
dynamic = ["version"]
description = "Jupyter in the terminal"
readme = "README.md"
license = "MIT"
requires-python = ">=3.7"
authors = [ { name = "David Brochart", email = "david.brochart@gmail.com" }, ]
keywords = [
    "jupyter",
    "textual",
]
dependencies = [
    "typer >=0.6.1,<1",
    "txl_cell",
    "txl_editors",
    "txl_file_browser",
    "txl_jpterm",
    "txl_local_contents",
    "txl_notebook_editor",
    "txl_notebook_viewer",
    "txl_remote_contents",
    "txl_text_viewer",
]

[project.scripts]
jpterm = "txl.cli:run_main"

[project.urls]
Homepage = "https://github.com/davidbrochart/jpterm"

[tool.hatch.version]
path = "jpterm/__init__.py"

[tool.hatch.envs.dev]
# TODO: if/when hatch gets support for  defining editable dependencies, the
# pre-install commands here and post-install commands in the matrix can be moved
# to the dependencies section
pre-install-commands = [
    "pip install -e ./txl",
    "pip install -e ./plugins/editors",
    "pip install -e ./plugins/file_browser",
    "pip install -e ./plugins/text_viewer",
    "pip install -e ./plugins/jpterm",
]

[tool.hatch.envs.dev.overrides]
matrix.contents.post-install-commands = [
    { value = "pip install -e ./plugins/local_contents", if = ["local_contents"] },
    { value = "pip install -e ./plugins/remote_contents", if = ["remote_contents"] },
]

matrix.notebook.post-install-commands = [
    { value = "pip install -e ./plugins/notebook_viewer", if = ["notebook_viewer"] },
    { value = "pip install -e ./plugins/cell -e ./plugins/notebook_editor", if = ["notebook_editor"] },
]

[[tool.hatch.envs.dev.matrix]]
contents = ["local_contents", "remote_contents"]
notebook = ["notebook_viewer", "notebook_editor"]
